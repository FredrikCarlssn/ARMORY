{"version":3,"file":"static/js/1539.c32f318c.chunk.js","mappings":"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","sources":["../node_modules/@thirdweb-dev/wallets/dist/WagmiConnector-2f14002d.browser.esm.js","../node_modules/@thirdweb-dev/wallets/dist/errors-9edc08c8.browser.esm.js","../node_modules/@thirdweb-dev/wallets/dist/normalizeChainId-1fb9aedf.browser.esm.js","../node_modules/@blocto/sdk/dist/blocto-sdk.module.js","../node_modules/@thirdweb-dev/wallets/evm/connectors/blocto/dist/thirdweb-dev-wallets-evm-connectors-blocto.browser.esm.js"],"sourcesContent":["import { defaultChains } from '@thirdweb-dev/chains';\nimport EventEmitter from 'eventemitter3';\n\nclass WagmiConnector extends EventEmitter {\n  /** Unique connector id */\n\n  /** Connector name */\n\n  /** Chains connector supports */\n\n  /** Options to use with connector */\n\n  /** Whether connector is usable */\n\n  constructor(_ref) {\n    let {\n      chains = defaultChains,\n      options\n    } = _ref;\n    super();\n    this.chains = chains;\n    this.options = options;\n  }\n  getBlockExplorerUrls(chain) {\n    const explorers = chain.explorers?.map(x => x.url) ?? [];\n    return explorers.length > 0 ? explorers : undefined;\n  }\n  isChainUnsupported(chainId) {\n    return !this.chains.some(x => x.chainId === chainId);\n  }\n  updateChains(chains) {\n    this.chains = chains;\n  }\n}\n\nexport { WagmiConnector as W };\n","import { _ as _defineProperty } from './defineProperty-350fc508.browser.esm.js';\n\n/**\n * Error subclass implementing JSON RPC 2.0 errors and Ethereum RPC errors per EIP-1474.\n * @see https://eips.ethereum.org/EIPS/eip-1474\n */\nclass RpcError extends Error {\n  constructor( /** Human-readable string */\n  message, options) {\n    const {\n      cause,\n      code,\n      data\n    } = options;\n    if (!Number.isInteger(code)) {\n      throw new Error('\"code\" must be an integer.');\n    }\n    if (!message || typeof message !== \"string\") {\n      throw new Error('\"message\" must be a nonempty string.');\n    }\n    super(`${message}. Cause: ${JSON.stringify(cause)}`);\n    this.cause = cause;\n    this.code = code;\n    this.data = data;\n  }\n}\n\n/**\n * @internal\n * Error subclass implementing Ethereum Provider errors per EIP-1193.\n * @see https://eips.ethereum.org/EIPS/eip-1193\n */\nclass ProviderRpcError extends RpcError {\n  /**\n   * Create an Ethereum Provider JSON-RPC error.\n   * `code` must be an integer in the `1000 <= 4999` range.\n   */\n  constructor( /** Human-readable string */\n  message, options) {\n    const {\n      cause,\n      code,\n      data\n    } = options;\n    if (!(Number.isInteger(code) && code >= 1000 && code <= 4999)) {\n      throw new Error('\"code\" must be an integer such that: 1000 <= code <= 4999');\n    }\n    super(message, {\n      cause,\n      code,\n      data\n    });\n  }\n}\n\n/**\n * @internal\n */\nclass AddChainError extends Error {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"name\", \"AddChainError\");\n    _defineProperty(this, \"message\", \"Error adding chain\");\n  }\n}\n\n/**\n * @internal\n */\nclass ChainNotConfiguredError extends Error {\n  constructor(_ref) {\n    let {\n      chainId,\n      connectorId\n    } = _ref;\n    super(`Chain \"${chainId}\" not configured for connector \"${connectorId}\".`);\n    _defineProperty(this, \"name\", \"ChainNotConfigured\");\n  }\n}\nclass ConnectorNotFoundError extends Error {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"name\", \"ConnectorNotFoundError\");\n    _defineProperty(this, \"message\", \"Connector not found\");\n  }\n}\nclass ResourceUnavailableError extends RpcError {\n  constructor(cause) {\n    super(\"Resource unavailable\", {\n      cause,\n      code: -32002\n    });\n    _defineProperty(this, \"name\", \"ResourceUnavailable\");\n  }\n}\n/**\n * @internal\n */\nclass SwitchChainError extends ProviderRpcError {\n  constructor(cause) {\n    super(\"Error switching chain\", {\n      cause,\n      code: 4902\n    });\n    _defineProperty(this, \"name\", \"SwitchChainError\");\n  }\n}\n/**\n * @internal\n */\nclass UserRejectedRequestError extends ProviderRpcError {\n  constructor(cause) {\n    super(\"User rejected request\", {\n      cause,\n      code: 4001\n    });\n    _defineProperty(this, \"name\", \"UserRejectedRequestError\");\n  }\n}\n\n/**\n * @internal\n */\n// Ethers does not have an error type so we can use this for casting\n// https://github.com/ethers-io/ethers.js/blob/main/packages/logger/src.ts/index.ts#L268\n\nexport { AddChainError as A, ChainNotConfiguredError as C, ProviderRpcError as P, ResourceUnavailableError as R, SwitchChainError as S, UserRejectedRequestError as U, ConnectorNotFoundError as a };\n","/**\n * @internal\n */\nfunction normalizeChainId(chainId) {\n  if (typeof chainId === \"string\") {\n    return Number.parseInt(chainId, chainId.trim().substring(0, 2) === \"0x\" ? 16 : 10);\n  }\n  if (typeof chainId === \"bigint\") {\n    return Number(chainId);\n  }\n  return chainId;\n}\n\nexport { normalizeChainId as n };\n","/* Version: 0.5.5 - August 14, 2023 10:23:52 */\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol */\r\n\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\n// instead invariant from package, since all error will throw on production\nfunction invariant(condition, format) {\n    if (!condition) {\n        throw new Error(format);\n    }\n}\n\n// local storage version naming rule: [milestone].[patch]\nvar KEY_SESSION;\n(function (KEY_SESSION) {\n    KEY_SESSION[\"prod\"] = \"BLOCTO_SDK\";\n    KEY_SESSION[\"dev\"] = \"BLOCTO_SDK_DEV\";\n    KEY_SESSION[\"staging\"] = \"BLOCTO_SDK_STAGING\";\n})(KEY_SESSION || (KEY_SESSION = {}));\nvar CHAIN;\n(function (CHAIN) {\n    CHAIN[\"ETHEREUM\"] = \"ethereum\";\n    CHAIN[\"SOLANA\"] = \"solana\";\n    CHAIN[\"APTOS\"] = \"aptos\";\n})(CHAIN || (CHAIN = {}));\n\nclass MemoryStorage {\n    constructor() {\n        this.storage = {};\n    }\n    getItem(key) {\n        return this[key] || null;\n    }\n    setItem(key, value) {\n        this.storage[key] = value;\n    }\n    removeItem(key) {\n        delete this.storage[key];\n    }\n}\nconst memoryStorage = typeof window !== 'undefined' ? window.memoryStorage : new MemoryStorage();\n\nconst isSupported = () => {\n    if (typeof window === 'undefined') {\n        return false;\n    }\n    try {\n        window.sessionStorage.setItem('local_storage_supported', '1');\n        const result = window.sessionStorage.getItem('local_storage_supported');\n        window.sessionStorage.removeItem('local_storage_supported');\n        return result === '1';\n    }\n    catch (error) {\n        return false;\n    }\n};\nconst storage = isSupported() ? window.sessionStorage : memoryStorage;\nconst getItem = (key, defaultValue = null) => {\n    const value = storage.getItem(key);\n    try {\n        return (value && JSON.parse(value)) || defaultValue;\n    }\n    catch (SyntaxError) {\n        return value || defaultValue;\n    }\n};\nconst setItem = (key, value) => storage.setItem(key, typeof value === 'string' ? value : JSON.stringify(value));\nconst removeItem = (key) => {\n    setItem(key, ''); // Due to some versions of browser bug can't removeItem correctly.\n    storage.removeItem(key);\n};\n/**\n * @param {keys.KEY_SESSION} key - key to retrieve the data\n * @returns {ProviderSession | null} ProviderSession | null\n * @description\n * Get ProviderSession from storage.\n * If the data is expired, will remove the data and return null\n */\nconst getAccountStorage = (key) => {\n    const rawAccountStorage = getItem(key, null);\n    if (!rawAccountStorage)\n        return null;\n    // compare the expiry time of the item with the current time\n    if (new Date().getTime() > rawAccountStorage.expiry ||\n        rawAccountStorage.v !== SDK_VERSION) {\n        removeItem(key);\n        return null;\n    }\n    return rawAccountStorage === null || rawAccountStorage === void 0 ? void 0 : rawAccountStorage.data;\n};\n/**\n  @param {keys.KEY_SESSION} key - key to store the data\n  @param {ProviderSession} data - Only the part of ProviderSession that needs to be updated\n  {\n    connected?: boolean;\n    code?: string | null;\n    accounts: Record<string, string[] | undefined>;\n  }\n  @param {number} expiry - expiry time of the data\n*/\nconst setAccountStorage = (key, data, expiry) => {\n    var _a, _b, _c;\n    const rawAccountStorage = getItem(key);\n    const newAccountStorage = {\n        data: {\n            code: (data === null || data === void 0 ? void 0 : data.code) || ((_a = rawAccountStorage === null || rawAccountStorage === void 0 ? void 0 : rawAccountStorage.data) === null || _a === void 0 ? void 0 : _a.code),\n            connected: !!((data === null || data === void 0 ? void 0 : data.code) || ((_b = rawAccountStorage === null || rawAccountStorage === void 0 ? void 0 : rawAccountStorage.data) === null || _b === void 0 ? void 0 : _b.code)),\n            accounts: Object.assign(Object.assign({}, (_c = rawAccountStorage === null || rawAccountStorage === void 0 ? void 0 : rawAccountStorage.data) === null || _c === void 0 ? void 0 : _c.accounts), data === null || data === void 0 ? void 0 : data.accounts),\n        },\n        expiry: expiry ||\n            (rawAccountStorage === null || rawAccountStorage === void 0 ? void 0 : rawAccountStorage.expiry) ||\n            new Date().getTime() + LOGIN_PERSISTING_TIME,\n        v: SDK_VERSION,\n    };\n    setItem(key, newAccountStorage);\n    return;\n};\nconst getChainAddress = (key, chain) => {\n    var _a, _b;\n    if (!((_a = getAccountStorage(key)) === null || _a === void 0 ? void 0 : _a.code)) {\n        removeItem(key);\n        return null;\n    }\n    return ((_b = getAccountStorage(key)) === null || _b === void 0 ? void 0 : _b.accounts[chain]) || null;\n};\nconst setChainAddress = (key, chain, account) => {\n    setAccountStorage(key, { accounts: { [chain]: account } });\n    return;\n};\nconst removeChainAddress = (key, chain) => {\n    setAccountStorage(key, { accounts: { [chain]: undefined } });\n    return;\n};\n\n/* eth series constants begin */\nconst ETH_RPC_LIST = {\n    // This is the list of public RPC endpoints that we known to be working\n    // Used to help developers did not set up their own RPC endpoints\n    // BSC mainnet\n    56: 'https://bsc-dataseed1.binance.org',\n    // BSC testnet\n    97: 'https://data-seed-prebsc-1-s1.binance.org:8545',\n    // Polygon Mainnet\n    137: 'https://rpc-mainnet.maticvigil.com/',\n    // Polygon Testnet\n    80001: 'https://rpc-mumbai.matic.today/',\n    // Avalanche Mainnet\n    43114: 'https://api.avax.network/ext/bc/C/rpc',\n    // Avalanche Fuji Testnet\n    43113: 'https://api.avax-test.network/ext/bc/C/rpc',\n    // Arbitrum Mainnet\n    42161: 'https://arb1.arbitrum.io/rpc',\n    // Arbitrum Testnet\n    421613: 'https://endpoints.omniatech.io/v1/arbitrum/goerli/public',\n    // Optimism Mainnet\n    10: 'https://mainnet.optimism.io',\n    // Optimism Goerli Testnet\n    420: 'https://goerli.optimism.io',\n};\nconst ETH_ENV_WALLET_SERVER_MAPPING = {\n    prod: 'https://wallet-v2.blocto.app',\n    staging: 'https://wallet-v2-staging.blocto.app',\n    dev: 'https://wallet-v2-dev.blocto.app',\n};\nconst ETH_SESSION_KEY_MAPPING = {\n    prod: KEY_SESSION.prod,\n    staging: KEY_SESSION.staging,\n    dev: KEY_SESSION.dev,\n};\n/* eth series constants end */\n/* sol constants begin */\nconst SOL_NET = {\n    MainnetBeta: 'mainnet-beta',\n    Testnet: 'testnet',\n    Devnet: 'devnet',\n};\nconst SOL_NET_SERVER_MAPPING = {\n    [SOL_NET.MainnetBeta]: 'https://wallet-v2.blocto.app',\n    [SOL_NET.Devnet]: 'https://wallet-v2-dev.blocto.app',\n    [SOL_NET.Testnet]: 'https://wallet-v2-dev.blocto.app',\n};\nconst SOL_SESSION_KEY_MAPPING = {\n    [SOL_NET.MainnetBeta]: KEY_SESSION.prod,\n    [SOL_NET.Devnet]: KEY_SESSION.dev,\n    [SOL_NET.Testnet]: KEY_SESSION.dev,\n};\n/* sol constants end */\n/* aptos constants begin */\nconst APT_SESSION_KEY_MAPPING = {\n    1: KEY_SESSION.prod,\n    2: KEY_SESSION.dev,\n    3: KEY_SESSION.dev,\n    4: KEY_SESSION.dev,\n    5: KEY_SESSION.staging,\n};\nconst APT_CHAIN_ID_SERVER_MAPPING = {\n    // MAINNET\n    1: 'https://wallet-v2.blocto.app',\n    // TESTNET\n    2: 'https://wallet-v2-dev.blocto.app',\n    // DEVNET\n    3: 'https://wallet-v2-dev.blocto.app',\n    // TESTING\n    4: 'https://wallet-v2-dev.blocto.app',\n    // PREMAINNET\n    5: 'https://wallet-v2-staging.blocto.app',\n};\nvar WalletAdapterNetwork;\n(function (WalletAdapterNetwork) {\n    WalletAdapterNetwork[\"Mainnet\"] = \"mainnet\";\n    WalletAdapterNetwork[\"Testnet\"] = \"testnet\";\n    WalletAdapterNetwork[\"Devnet\"] = \"devnet\";\n    WalletAdapterNetwork[\"Testing\"] = \"testing\";\n    WalletAdapterNetwork[\"Premainnet\"] = \"premainnet\";\n})(WalletAdapterNetwork || (WalletAdapterNetwork = {}));\nconst APT_CHAIN_ID_NAME_MAPPING = {\n    1: WalletAdapterNetwork.Mainnet,\n    2: WalletAdapterNetwork.Testnet,\n    3: WalletAdapterNetwork.Devnet,\n    4: WalletAdapterNetwork.Testing,\n    5: WalletAdapterNetwork.Premainnet,\n};\nconst APT_CHAIN_ID_RPC_MAPPING = {\n    1: 'https://fullnode.mainnet.aptoslabs.com/v1',\n    2: 'https://fullnode.testnet.aptoslabs.com/v1',\n    3: 'https://fullnode.devnet.aptoslabs.com/v1',\n    4: '',\n    5: 'https://premainnet.aptosdev.com/v1',\n};\n/* aptos constants end */\nconst EIP1193_EVENTS = [\n    'connect',\n    'disconnect',\n    'message',\n    'chainChanged',\n    'accountsChanged',\n];\n// Preserve login for 1 day\nconst LOGIN_PERSISTING_TIME = 86400 * 1000;\nconst DEFAULT_APP_ID = '00000000-0000-0000-0000-000000000000';\n// Will inject the version of the SDK by rollup versionInjector during build time\nconst SDK_VERSION = '0.5.5';\n\n// The root class for all providers\nclass BloctoProvider {\n    constructor() {\n        this.isBlocto = true;\n        this.isConnecting = false;\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        this.eventListeners = {};\n        // alias removeListener\n        this.off = this.removeListener;\n        // init event listeners\n        EIP1193_EVENTS.forEach((event) => {\n            this.eventListeners[event] = [];\n        });\n        this.appId = DEFAULT_APP_ID;\n    }\n    // implement by children\n    // eslint-disable-next-line\n    request(payload) {\n        return __awaiter(this, void 0, void 0, function* () { });\n    }\n    on(event, listener) {\n        if (!EIP1193_EVENTS.includes(event))\n            return;\n        this.eventListeners[event].push(listener);\n    }\n    // @todo: implement it\n    // eslint-disable-next-line\n    once() { }\n    removeListener(event, listener) {\n        const listeners = this.eventListeners[event];\n        const index = listeners.findIndex((item) => item === listener);\n        if (index !== -1) {\n            this.eventListeners[event].splice(index, 1);\n        }\n    }\n}\n\nconst IFRAME_STYLE = 'width:100vw;height:100%;position:fixed;top:0;left:0;z-index:2147483646;border:none;box-sizing:border-box;color-scheme:light;inset:0px;display:block;pointer-events:auto;';\nfunction createFrame(url) {\n    const frame = document.createElement('iframe');\n    frame.setAttribute('src', url);\n    frame.setAttribute('style', IFRAME_STYLE);\n    return frame;\n}\nfunction attachFrame(frame) {\n    document.body.appendChild(frame);\n}\nfunction detatchFrame(frame) {\n    const parentNode = frame && frame.parentNode;\n    if (parentNode && parentNode.removeChild instanceof Function) {\n        parentNode.removeChild(frame);\n    }\n}\n\nvar addSelfRemovableHandler = (eventType, handler, target = window) => {\n    function listener(e) {\n        const removeEventListener = () => target.removeEventListener(eventType, listener);\n        handler(e, removeEventListener);\n    }\n    target.addEventListener(eventType, listener);\n};\n\nfunction responseSessionGuard(response, key, disconnectHandler) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (response.status === 403 || response.status === 401) {\n            if (disconnectHandler) {\n                disconnectHandler();\n            }\n            removeItem(key);\n        }\n        if (!response.ok) {\n            const data = yield response.json();\n            const e = new Error((data === null || data === void 0 ? void 0 : data.message) || 'unknown error');\n            e.error_code = data === null || data === void 0 ? void 0 : data.error_code;\n            throw e;\n        }\n        return response.json();\n    });\n}\n\nconst isEmail = (value) => /\\S+@\\S+\\.\\S+/.test(value);\nconst isValidTransaction = (transaction) => (typeof transaction === 'object' && transaction !== null && 'from' in transaction);\nconst isValidTransactions = (transactions) => (Array.isArray(transactions) && transactions.every(tx => isValidTransaction(tx)));\n\nfunction getEvmSupport() {\n    return __awaiter(this, void 0, void 0, function* () {\n        const { networks } = yield fetch('https://api.blocto.app/networks/evm').then((response) => response.json());\n        const evmSupportMap = networks.reduce((a, v) => (Object.assign(Object.assign({}, a), { [v.chain_id]: v })), {});\n        return evmSupportMap;\n    });\n}\n\nfunction getDefaultExportFromCjs (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nvar dist = {};\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nfunction _isNativeReflectConstruct$1() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _construct(Parent, args, Class) {\n  if (_isNativeReflectConstruct$1()) {\n    _construct = Reflect.construct.bind();\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n  return _construct.apply(null, arguments);\n}\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !_isNativeFunction(Class)) return Class;\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n      _cache.set(Class, Wrapper);\n    }\n    function Wrapper() {\n      return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n    }\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return _setPrototypeOf(Wrapper, Class);\n  };\n  return _wrapNativeSuper(Class);\n}\n\nvar classes = {};\n\nvar fastSafeStringify = stringify;\nstringify[\"default\"] = stringify;\nstringify.stable = deterministicStringify;\nstringify.stableStringify = deterministicStringify;\nvar LIMIT_REPLACE_NODE = '[...]';\nvar CIRCULAR_REPLACE_NODE = '[Circular]';\nvar arr = [];\nvar replacerStack = [];\nfunction defaultOptions() {\n  return {\n    depthLimit: Number.MAX_SAFE_INTEGER,\n    edgesLimit: Number.MAX_SAFE_INTEGER\n  };\n}\n\n// Regular stringify\nfunction stringify(obj, replacer, spacer, options) {\n  if (typeof options === 'undefined') {\n    options = defaultOptions();\n  }\n  decirc(obj, '', 0, [], undefined, 0, options);\n  var res;\n  try {\n    if (replacerStack.length === 0) {\n      res = JSON.stringify(obj, replacer, spacer);\n    } else {\n      res = JSON.stringify(obj, replaceGetterValues(replacer), spacer);\n    }\n  } catch (_) {\n    return JSON.stringify('[unable to serialize, circular reference is too complex to analyze]');\n  } finally {\n    while (arr.length !== 0) {\n      var part = arr.pop();\n      if (part.length === 4) {\n        Object.defineProperty(part[0], part[1], part[3]);\n      } else {\n        part[0][part[1]] = part[2];\n      }\n    }\n  }\n  return res;\n}\nfunction setReplace(replace, val, k, parent) {\n  var propertyDescriptor = Object.getOwnPropertyDescriptor(parent, k);\n  if (propertyDescriptor.get !== undefined) {\n    if (propertyDescriptor.configurable) {\n      Object.defineProperty(parent, k, {\n        value: replace\n      });\n      arr.push([parent, k, val, propertyDescriptor]);\n    } else {\n      replacerStack.push([val, k, replace]);\n    }\n  } else {\n    parent[k] = replace;\n    arr.push([parent, k, val]);\n  }\n}\nfunction decirc(val, k, edgeIndex, stack, parent, depth, options) {\n  depth += 1;\n  var i;\n  if (_typeof(val) === 'object' && val !== null) {\n    for (i = 0; i < stack.length; i++) {\n      if (stack[i] === val) {\n        setReplace(CIRCULAR_REPLACE_NODE, val, k, parent);\n        return;\n      }\n    }\n    if (typeof options.depthLimit !== 'undefined' && depth > options.depthLimit) {\n      setReplace(LIMIT_REPLACE_NODE, val, k, parent);\n      return;\n    }\n    if (typeof options.edgesLimit !== 'undefined' && edgeIndex + 1 > options.edgesLimit) {\n      setReplace(LIMIT_REPLACE_NODE, val, k, parent);\n      return;\n    }\n    stack.push(val);\n    // Optimize for Arrays. Big arrays could kill the performance otherwise!\n    if (Array.isArray(val)) {\n      for (i = 0; i < val.length; i++) {\n        decirc(val[i], i, i, stack, val, depth, options);\n      }\n    } else {\n      var keys = Object.keys(val);\n      for (i = 0; i < keys.length; i++) {\n        var key = keys[i];\n        decirc(val[key], key, i, stack, val, depth, options);\n      }\n    }\n    stack.pop();\n  }\n}\n\n// Stable-stringify\nfunction compareFunction(a, b) {\n  if (a < b) {\n    return -1;\n  }\n  if (a > b) {\n    return 1;\n  }\n  return 0;\n}\nfunction deterministicStringify(obj, replacer, spacer, options) {\n  if (typeof options === 'undefined') {\n    options = defaultOptions();\n  }\n  var tmp = deterministicDecirc(obj, '', 0, [], undefined, 0, options) || obj;\n  var res;\n  try {\n    if (replacerStack.length === 0) {\n      res = JSON.stringify(tmp, replacer, spacer);\n    } else {\n      res = JSON.stringify(tmp, replaceGetterValues(replacer), spacer);\n    }\n  } catch (_) {\n    return JSON.stringify('[unable to serialize, circular reference is too complex to analyze]');\n  } finally {\n    // Ensure that we restore the object as it was.\n    while (arr.length !== 0) {\n      var part = arr.pop();\n      if (part.length === 4) {\n        Object.defineProperty(part[0], part[1], part[3]);\n      } else {\n        part[0][part[1]] = part[2];\n      }\n    }\n  }\n  return res;\n}\nfunction deterministicDecirc(val, k, edgeIndex, stack, parent, depth, options) {\n  depth += 1;\n  var i;\n  if (_typeof(val) === 'object' && val !== null) {\n    for (i = 0; i < stack.length; i++) {\n      if (stack[i] === val) {\n        setReplace(CIRCULAR_REPLACE_NODE, val, k, parent);\n        return;\n      }\n    }\n    try {\n      if (typeof val.toJSON === 'function') {\n        return;\n      }\n    } catch (_) {\n      return;\n    }\n    if (typeof options.depthLimit !== 'undefined' && depth > options.depthLimit) {\n      setReplace(LIMIT_REPLACE_NODE, val, k, parent);\n      return;\n    }\n    if (typeof options.edgesLimit !== 'undefined' && edgeIndex + 1 > options.edgesLimit) {\n      setReplace(LIMIT_REPLACE_NODE, val, k, parent);\n      return;\n    }\n    stack.push(val);\n    // Optimize for Arrays. Big arrays could kill the performance otherwise!\n    if (Array.isArray(val)) {\n      for (i = 0; i < val.length; i++) {\n        deterministicDecirc(val[i], i, i, stack, val, depth, options);\n      }\n    } else {\n      // Create a temporary object in the required way\n      var tmp = {};\n      var keys = Object.keys(val).sort(compareFunction);\n      for (i = 0; i < keys.length; i++) {\n        var key = keys[i];\n        deterministicDecirc(val[key], key, i, stack, val, depth, options);\n        tmp[key] = val[key];\n      }\n      if (typeof parent !== 'undefined') {\n        arr.push([parent, k, val]);\n        parent[k] = tmp;\n      } else {\n        return tmp;\n      }\n    }\n    stack.pop();\n  }\n}\n\n// wraps replacer function to handle values we couldn't replace\n// and mark them as replaced value\nfunction replaceGetterValues(replacer) {\n  replacer = typeof replacer !== 'undefined' ? replacer : function (k, v) {\n    return v;\n  };\n  return function (key, val) {\n    if (replacerStack.length > 0) {\n      for (var i = 0; i < replacerStack.length; i++) {\n        var part = replacerStack[i];\n        if (part[1] === key && part[0] === val) {\n          val = part[2];\n          replacerStack.splice(i, 1);\n          break;\n        }\n      }\n    }\n    return replacer.call(this, key, val);\n  };\n}\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nObject.defineProperty(classes, \"__esModule\", {\n  value: true\n});\nclasses.EthereumProviderError = classes.EthereumRpcError = void 0;\nvar fast_safe_stringify_1 = fastSafeStringify;\n/**\n * Error subclass implementing JSON RPC 2.0 errors and Ethereum RPC errors\n * per EIP-1474.\n * Permits any integer error code.\n */\nvar EthereumRpcError = /*#__PURE__*/function (_Error) {\n  _inherits(EthereumRpcError, _Error);\n  var _super = _createSuper(EthereumRpcError);\n  function EthereumRpcError(code, message, data) {\n    var _this;\n    _classCallCheck(this, EthereumRpcError);\n    if (!Number.isInteger(code)) {\n      throw new Error('\"code\" must be an integer.');\n    }\n    if (!message || typeof message !== 'string') {\n      throw new Error('\"message\" must be a nonempty string.');\n    }\n    _this = _super.call(this, message);\n    _this.code = code;\n    if (data !== undefined) {\n      _this.data = data;\n    }\n    return _this;\n  }\n  /**\n   * Returns a plain object with all public class properties.\n   */\n  _createClass(EthereumRpcError, [{\n    key: \"serialize\",\n    value: function serialize() {\n      var serialized = {\n        code: this.code,\n        message: this.message\n      };\n      if (this.data !== undefined) {\n        serialized.data = this.data;\n      }\n      if (this.stack) {\n        serialized.stack = this.stack;\n      }\n      return serialized;\n    }\n    /**\n     * Return a string representation of the serialized error, omitting\n     * any circular references.\n     */\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return fast_safe_stringify_1[\"default\"](this.serialize(), stringifyReplacer, 2);\n    }\n  }]);\n  return EthereumRpcError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nclasses.EthereumRpcError = EthereumRpcError;\n/**\n * Error subclass implementing Ethereum Provider errors per EIP-1193.\n * Permits integer error codes in the [ 1000 <= 4999 ] range.\n */\nvar EthereumProviderError = /*#__PURE__*/function (_EthereumRpcError) {\n  _inherits(EthereumProviderError, _EthereumRpcError);\n  var _super2 = _createSuper(EthereumProviderError);\n  /**\n   * Create an Ethereum Provider JSON-RPC error.\n   * `code` must be an integer in the 1000 <= 4999 range.\n   */\n  function EthereumProviderError(code, message, data) {\n    _classCallCheck(this, EthereumProviderError);\n    if (!isValidEthProviderCode(code)) {\n      throw new Error('\"code\" must be an integer such that: 1000 <= code <= 4999');\n    }\n    return _super2.call(this, code, message, data);\n  }\n  return _createClass(EthereumProviderError);\n}(EthereumRpcError);\nclasses.EthereumProviderError = EthereumProviderError;\n// Internal\nfunction isValidEthProviderCode(code) {\n  return Number.isInteger(code) && code >= 1000 && code <= 4999;\n}\nfunction stringifyReplacer(_, value) {\n  if (value === '[Circular]') {\n    return undefined;\n  }\n  return value;\n}\n\nvar utils = {};\n\nvar errorConstants = {};\n\nObject.defineProperty(errorConstants, \"__esModule\", {\n  value: true\n});\nerrorConstants.errorValues = errorConstants.errorCodes = void 0;\nerrorConstants.errorCodes = {\n  rpc: {\n    invalidInput: -32000,\n    resourceNotFound: -32001,\n    resourceUnavailable: -32002,\n    transactionRejected: -32003,\n    methodNotSupported: -32004,\n    limitExceeded: -32005,\n    parse: -32700,\n    invalidRequest: -32600,\n    methodNotFound: -32601,\n    invalidParams: -32602,\n    internal: -32603\n  },\n  provider: {\n    userRejectedRequest: 4001,\n    unauthorized: 4100,\n    unsupportedMethod: 4200,\n    disconnected: 4900,\n    chainDisconnected: 4901\n  }\n};\nerrorConstants.errorValues = {\n  '-32700': {\n    standard: 'JSON RPC 2.0',\n    message: 'Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text.'\n  },\n  '-32600': {\n    standard: 'JSON RPC 2.0',\n    message: 'The JSON sent is not a valid Request object.'\n  },\n  '-32601': {\n    standard: 'JSON RPC 2.0',\n    message: 'The method does not exist / is not available.'\n  },\n  '-32602': {\n    standard: 'JSON RPC 2.0',\n    message: 'Invalid method parameter(s).'\n  },\n  '-32603': {\n    standard: 'JSON RPC 2.0',\n    message: 'Internal JSON-RPC error.'\n  },\n  '-32000': {\n    standard: 'EIP-1474',\n    message: 'Invalid input.'\n  },\n  '-32001': {\n    standard: 'EIP-1474',\n    message: 'Resource not found.'\n  },\n  '-32002': {\n    standard: 'EIP-1474',\n    message: 'Resource unavailable.'\n  },\n  '-32003': {\n    standard: 'EIP-1474',\n    message: 'Transaction rejected.'\n  },\n  '-32004': {\n    standard: 'EIP-1474',\n    message: 'Method not supported.'\n  },\n  '-32005': {\n    standard: 'EIP-1474',\n    message: 'Request limit exceeded.'\n  },\n  '4001': {\n    standard: 'EIP-1193',\n    message: 'User rejected the request.'\n  },\n  '4100': {\n    standard: 'EIP-1193',\n    message: 'The requested account and/or method has not been authorized by the user.'\n  },\n  '4200': {\n    standard: 'EIP-1193',\n    message: 'The requested method is not supported by this Ethereum provider.'\n  },\n  '4900': {\n    standard: 'EIP-1193',\n    message: 'The provider is disconnected from all chains.'\n  },\n  '4901': {\n    standard: 'EIP-1193',\n    message: 'The provider is disconnected from the specified chain.'\n  }\n};\n\n(function (exports) {\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.serializeError = exports.isValidCode = exports.getMessageFromCode = exports.JSON_RPC_SERVER_ERROR_MESSAGE = void 0;\n  var error_constants_1 = errorConstants;\n  var classes_1 = classes;\n  var FALLBACK_ERROR_CODE = error_constants_1.errorCodes.rpc.internal;\n  var FALLBACK_MESSAGE = 'Unspecified error message. This is a bug, please report it.';\n  var FALLBACK_ERROR = {\n    code: FALLBACK_ERROR_CODE,\n    message: getMessageFromCode(FALLBACK_ERROR_CODE)\n  };\n  exports.JSON_RPC_SERVER_ERROR_MESSAGE = 'Unspecified server error.';\n  /**\n   * Gets the message for a given code, or a fallback message if the code has\n   * no corresponding message.\n   */\n  function getMessageFromCode(code) {\n    var fallbackMessage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : FALLBACK_MESSAGE;\n    if (Number.isInteger(code)) {\n      var codeString = code.toString();\n      if (hasKey(error_constants_1.errorValues, codeString)) {\n        return error_constants_1.errorValues[codeString].message;\n      }\n      if (isJsonRpcServerError(code)) {\n        return exports.JSON_RPC_SERVER_ERROR_MESSAGE;\n      }\n    }\n    return fallbackMessage;\n  }\n  exports.getMessageFromCode = getMessageFromCode;\n  /**\n   * Returns whether the given code is valid.\n   * A code is only valid if it has a message.\n   */\n  function isValidCode(code) {\n    if (!Number.isInteger(code)) {\n      return false;\n    }\n    var codeString = code.toString();\n    if (error_constants_1.errorValues[codeString]) {\n      return true;\n    }\n    if (isJsonRpcServerError(code)) {\n      return true;\n    }\n    return false;\n  }\n  exports.isValidCode = isValidCode;\n  /**\n   * Serializes the given error to an Ethereum JSON RPC-compatible error object.\n   * Merely copies the given error's values if it is already compatible.\n   * If the given error is not fully compatible, it will be preserved on the\n   * returned object's data.originalError property.\n   */\n  function serializeError(error) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$fallbackError = _ref.fallbackError,\n      fallbackError = _ref$fallbackError === void 0 ? FALLBACK_ERROR : _ref$fallbackError,\n      _ref$shouldIncludeSta = _ref.shouldIncludeStack,\n      shouldIncludeStack = _ref$shouldIncludeSta === void 0 ? false : _ref$shouldIncludeSta;\n    var _a, _b;\n    if (!fallbackError || !Number.isInteger(fallbackError.code) || typeof fallbackError.message !== 'string') {\n      throw new Error('Must provide fallback error with integer number code and string message.');\n    }\n    if (error instanceof classes_1.EthereumRpcError) {\n      return error.serialize();\n    }\n    var serialized = {};\n    if (error && _typeof(error) === 'object' && !Array.isArray(error) && hasKey(error, 'code') && isValidCode(error.code)) {\n      var _error = error;\n      serialized.code = _error.code;\n      if (_error.message && typeof _error.message === 'string') {\n        serialized.message = _error.message;\n        if (hasKey(_error, 'data')) {\n          serialized.data = _error.data;\n        }\n      } else {\n        serialized.message = getMessageFromCode(serialized.code);\n        serialized.data = {\n          originalError: assignOriginalError(error)\n        };\n      }\n    } else {\n      serialized.code = fallbackError.code;\n      var message = (_a = error) === null || _a === void 0 ? void 0 : _a.message;\n      serialized.message = message && typeof message === 'string' ? message : fallbackError.message;\n      serialized.data = {\n        originalError: assignOriginalError(error)\n      };\n    }\n    var stack = (_b = error) === null || _b === void 0 ? void 0 : _b.stack;\n    if (shouldIncludeStack && error && stack && typeof stack === 'string') {\n      serialized.stack = stack;\n    }\n    return serialized;\n  }\n  exports.serializeError = serializeError;\n  // Internal\n  function isJsonRpcServerError(code) {\n    return code >= -32099 && code <= -32000;\n  }\n  function assignOriginalError(error) {\n    if (error && _typeof(error) === 'object' && !Array.isArray(error)) {\n      return Object.assign({}, error);\n    }\n    return error;\n  }\n  function hasKey(obj, key) {\n    return Object.prototype.hasOwnProperty.call(obj, key);\n  }\n})(utils);\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nvar errors = {};\n\nObject.defineProperty(errors, \"__esModule\", {\n  value: true\n});\nerrors.ethErrors = void 0;\nvar classes_1 = classes;\nvar utils_1 = utils;\nvar error_constants_1 = errorConstants;\nerrors.ethErrors = {\n  rpc: {\n    /**\n     * Get a JSON RPC 2.0 Parse (-32700) error.\n     */\n    parse: function parse(arg) {\n      return getEthJsonRpcError(error_constants_1.errorCodes.rpc.parse, arg);\n    },\n    /**\n     * Get a JSON RPC 2.0 Invalid Request (-32600) error.\n     */\n    invalidRequest: function invalidRequest(arg) {\n      return getEthJsonRpcError(error_constants_1.errorCodes.rpc.invalidRequest, arg);\n    },\n    /**\n     * Get a JSON RPC 2.0 Invalid Params (-32602) error.\n     */\n    invalidParams: function invalidParams(arg) {\n      return getEthJsonRpcError(error_constants_1.errorCodes.rpc.invalidParams, arg);\n    },\n    /**\n     * Get a JSON RPC 2.0 Method Not Found (-32601) error.\n     */\n    methodNotFound: function methodNotFound(arg) {\n      return getEthJsonRpcError(error_constants_1.errorCodes.rpc.methodNotFound, arg);\n    },\n    /**\n     * Get a JSON RPC 2.0 Internal (-32603) error.\n     */\n    internal: function internal(arg) {\n      return getEthJsonRpcError(error_constants_1.errorCodes.rpc.internal, arg);\n    },\n    /**\n     * Get a JSON RPC 2.0 Server error.\n     * Permits integer error codes in the [ -32099 <= -32005 ] range.\n     * Codes -32000 through -32004 are reserved by EIP-1474.\n     */\n    server: function server(opts) {\n      if (!opts || _typeof(opts) !== 'object' || Array.isArray(opts)) {\n        throw new Error('Ethereum RPC Server errors must provide single object argument.');\n      }\n      var code = opts.code;\n      if (!Number.isInteger(code) || code > -32005 || code < -32099) {\n        throw new Error('\"code\" must be an integer such that: -32099 <= code <= -32005');\n      }\n      return getEthJsonRpcError(code, opts);\n    },\n    /**\n     * Get an Ethereum JSON RPC Invalid Input (-32000) error.\n     */\n    invalidInput: function invalidInput(arg) {\n      return getEthJsonRpcError(error_constants_1.errorCodes.rpc.invalidInput, arg);\n    },\n    /**\n     * Get an Ethereum JSON RPC Resource Not Found (-32001) error.\n     */\n    resourceNotFound: function resourceNotFound(arg) {\n      return getEthJsonRpcError(error_constants_1.errorCodes.rpc.resourceNotFound, arg);\n    },\n    /**\n     * Get an Ethereum JSON RPC Resource Unavailable (-32002) error.\n     */\n    resourceUnavailable: function resourceUnavailable(arg) {\n      return getEthJsonRpcError(error_constants_1.errorCodes.rpc.resourceUnavailable, arg);\n    },\n    /**\n     * Get an Ethereum JSON RPC Transaction Rejected (-32003) error.\n     */\n    transactionRejected: function transactionRejected(arg) {\n      return getEthJsonRpcError(error_constants_1.errorCodes.rpc.transactionRejected, arg);\n    },\n    /**\n     * Get an Ethereum JSON RPC Method Not Supported (-32004) error.\n     */\n    methodNotSupported: function methodNotSupported(arg) {\n      return getEthJsonRpcError(error_constants_1.errorCodes.rpc.methodNotSupported, arg);\n    },\n    /**\n     * Get an Ethereum JSON RPC Limit Exceeded (-32005) error.\n     */\n    limitExceeded: function limitExceeded(arg) {\n      return getEthJsonRpcError(error_constants_1.errorCodes.rpc.limitExceeded, arg);\n    }\n  },\n  provider: {\n    /**\n     * Get an Ethereum Provider User Rejected Request (4001) error.\n     */\n    userRejectedRequest: function userRejectedRequest(arg) {\n      return getEthProviderError(error_constants_1.errorCodes.provider.userRejectedRequest, arg);\n    },\n    /**\n     * Get an Ethereum Provider Unauthorized (4100) error.\n     */\n    unauthorized: function unauthorized(arg) {\n      return getEthProviderError(error_constants_1.errorCodes.provider.unauthorized, arg);\n    },\n    /**\n     * Get an Ethereum Provider Unsupported Method (4200) error.\n     */\n    unsupportedMethod: function unsupportedMethod(arg) {\n      return getEthProviderError(error_constants_1.errorCodes.provider.unsupportedMethod, arg);\n    },\n    /**\n     * Get an Ethereum Provider Not Connected (4900) error.\n     */\n    disconnected: function disconnected(arg) {\n      return getEthProviderError(error_constants_1.errorCodes.provider.disconnected, arg);\n    },\n    /**\n     * Get an Ethereum Provider Chain Not Connected (4901) error.\n     */\n    chainDisconnected: function chainDisconnected(arg) {\n      return getEthProviderError(error_constants_1.errorCodes.provider.chainDisconnected, arg);\n    },\n    /**\n     * Get a custom Ethereum Provider error.\n     */\n    custom: function custom(opts) {\n      if (!opts || _typeof(opts) !== 'object' || Array.isArray(opts)) {\n        throw new Error('Ethereum Provider custom errors must provide single object argument.');\n      }\n      var code = opts.code,\n        message = opts.message,\n        data = opts.data;\n      if (!message || typeof message !== 'string') {\n        throw new Error('\"message\" must be a nonempty string');\n      }\n      return new classes_1.EthereumProviderError(code, message, data);\n    }\n  }\n};\n// Internal\nfunction getEthJsonRpcError(code, arg) {\n  var _parseOpts = parseOpts(arg),\n    _parseOpts2 = _slicedToArray(_parseOpts, 2),\n    message = _parseOpts2[0],\n    data = _parseOpts2[1];\n  return new classes_1.EthereumRpcError(code, message || utils_1.getMessageFromCode(code), data);\n}\nfunction getEthProviderError(code, arg) {\n  var _parseOpts3 = parseOpts(arg),\n    _parseOpts4 = _slicedToArray(_parseOpts3, 2),\n    message = _parseOpts4[0],\n    data = _parseOpts4[1];\n  return new classes_1.EthereumProviderError(code, message || utils_1.getMessageFromCode(code), data);\n}\nfunction parseOpts(arg) {\n  if (arg) {\n    if (typeof arg === 'string') {\n      return [arg];\n    } else if (_typeof(arg) === 'object' && !Array.isArray(arg)) {\n      var message = arg.message,\n        data = arg.data;\n      if (message && typeof message !== 'string') {\n        throw new Error('Must specify string message.');\n      }\n      return [message || undefined, data];\n    }\n  }\n  return [];\n}\n\n(function (exports) {\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.getMessageFromCode = exports.serializeError = exports.EthereumProviderError = exports.EthereumRpcError = exports.ethErrors = exports.errorCodes = void 0;\n  var classes_1 = classes;\n  Object.defineProperty(exports, \"EthereumRpcError\", {\n    enumerable: true,\n    get: function get() {\n      return classes_1.EthereumRpcError;\n    }\n  });\n  Object.defineProperty(exports, \"EthereumProviderError\", {\n    enumerable: true,\n    get: function get() {\n      return classes_1.EthereumProviderError;\n    }\n  });\n  var utils_1 = utils;\n  Object.defineProperty(exports, \"serializeError\", {\n    enumerable: true,\n    get: function get() {\n      return utils_1.serializeError;\n    }\n  });\n  Object.defineProperty(exports, \"getMessageFromCode\", {\n    enumerable: true,\n    get: function get() {\n      return utils_1.getMessageFromCode;\n    }\n  });\n  var errors_1 = errors;\n  Object.defineProperty(exports, \"ethErrors\", {\n    enumerable: true,\n    get: function get() {\n      return errors_1.ethErrors;\n    }\n  });\n  var error_constants_1 = errorConstants;\n  Object.defineProperty(exports, \"errorCodes\", {\n    enumerable: true,\n    get: function get() {\n      return error_constants_1.errorCodes;\n    }\n  });\n})(dist);\n\nvar global$1 = (typeof global !== \"undefined\" ? global :\n  typeof self !== \"undefined\" ? self :\n  typeof window !== \"undefined\" ? window : {});\n\nvar lookup = [];\nvar revLookup = [];\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\nvar inited = false;\nfunction init () {\n  inited = true;\n  var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n  for (var i = 0, len = code.length; i < len; ++i) {\n    lookup[i] = code[i];\n    revLookup[code.charCodeAt(i)] = i;\n  }\n\n  revLookup['-'.charCodeAt(0)] = 62;\n  revLookup['_'.charCodeAt(0)] = 63;\n}\n\nfunction toByteArray (b64) {\n  if (!inited) {\n    init();\n  }\n  var i, j, l, tmp, placeHolders, arr;\n  var len = b64.length;\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  placeHolders = b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0;\n\n  // base64 is 4/3 + up to two characters of the original data\n  arr = new Arr(len * 3 / 4 - placeHolders);\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len;\n\n  var L = 0;\n\n  for (i = 0, j = 0; i < l; i += 4, j += 3) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)];\n    arr[L++] = (tmp >> 16) & 0xFF;\n    arr[L++] = (tmp >> 8) & 0xFF;\n    arr[L++] = tmp & 0xFF;\n  }\n\n  if (placeHolders === 2) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4);\n    arr[L++] = tmp & 0xFF;\n  } else if (placeHolders === 1) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2);\n    arr[L++] = (tmp >> 8) & 0xFF;\n    arr[L++] = tmp & 0xFF;\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp;\n  var output = [];\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2]);\n    output.push(tripletToBase64(tmp));\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  if (!inited) {\n    init();\n  }\n  var tmp;\n  var len = uint8.length;\n  var extraBytes = len % 3; // if we have 1 byte left, pad 2 bytes\n  var output = '';\n  var parts = [];\n  var maxChunkLength = 16383; // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)));\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1];\n    output += lookup[tmp >> 2];\n    output += lookup[(tmp << 4) & 0x3F];\n    output += '==';\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + (uint8[len - 1]);\n    output += lookup[tmp >> 10];\n    output += lookup[(tmp >> 4) & 0x3F];\n    output += lookup[(tmp << 2) & 0x3F];\n    output += '=';\n  }\n\n  parts.push(output);\n\n  return parts.join('')\n}\n\nfunction read (buffer, offset, isLE, mLen, nBytes) {\n  var e, m;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = -7;\n  var i = isLE ? (nBytes - 1) : 0;\n  var d = isLE ? -1 : 1;\n  var s = buffer[offset + i];\n\n  i += d;\n\n  e = s & ((1 << (-nBits)) - 1);\n  s >>= (-nBits);\n  nBits += eLen;\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1);\n  e >>= (-nBits);\n  nBits += mLen;\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen);\n    e = e - eBias;\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nfunction write (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0);\n  var i = isLE ? 0 : (nBytes - 1);\n  var d = isLE ? 1 : -1;\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0;\n\n  value = Math.abs(value);\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0;\n    e = eMax;\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2);\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * Math.pow(2, 1 - eBias);\n    }\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n      e = 0;\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m;\n  eLen += mLen;\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128;\n}\n\nvar toString = {}.toString;\n\nvar isArray = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n\nvar INSPECT_MAX_BYTES = 50;\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global$1.TYPED_ARRAY_SUPPORT !== undefined\n  ? global$1.TYPED_ARRAY_SUPPORT\n  : true;\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nkMaxLength();\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length);\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length);\n    }\n    that.length = length;\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192; // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype;\n  return arr\n};\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n};\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype;\n  Buffer.__proto__ = Uint8Array;\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) ;\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size);\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n};\n\nfunction allocUnsafe (that, size) {\n  assertSize(size);\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0;\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n};\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n};\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8';\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0;\n  that = createBuffer(that, length);\n\n  var actual = that.write(string, encoding);\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual);\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0;\n  that = createBuffer(that, length);\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255;\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength; // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array);\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset);\n  } else {\n    array = new Uint8Array(array, byteOffset, length);\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array;\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array);\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (internalIsBuffer(obj)) {\n    var len = checked(obj.length) | 0;\n    that = createBuffer(that, len);\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len);\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\nBuffer.isBuffer = isBuffer;\nfunction internalIsBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!internalIsBuffer(a) || !internalIsBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n};\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n};\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i;\n  if (length === undefined) {\n    length = 0;\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length;\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length);\n  var pos = 0;\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i];\n    if (!internalIsBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos);\n    pos += buf.length;\n  }\n  return buffer\n};\n\nfunction byteLength (string, encoding) {\n  if (internalIsBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string;\n  }\n\n  var len = string.length;\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false;\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n}\nBuffer.byteLength = byteLength;\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false;\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0;\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length;\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0;\n  start >>>= 0;\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8';\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase();\n        loweredCase = true;\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true;\n\nfunction swap (b, n, m) {\n  var i = b[n];\n  b[n] = b[m];\n  b[m] = i;\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length;\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1);\n  }\n  return this\n};\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length;\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3);\n    swap(this, i + 1, i + 2);\n  }\n  return this\n};\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length;\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7);\n    swap(this, i + 1, i + 6);\n    swap(this, i + 2, i + 5);\n    swap(this, i + 3, i + 4);\n  }\n  return this\n};\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0;\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n};\n\nBuffer.prototype.equals = function equals (b) {\n  if (!internalIsBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n};\n\nBuffer.prototype.inspect = function inspect () {\n  var str = '';\n  var max = INSPECT_MAX_BYTES;\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ');\n    if (this.length > max) str += ' ... ';\n  }\n  return '<Buffer ' + str + '>'\n};\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!internalIsBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0;\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0;\n  }\n  if (thisStart === undefined) {\n    thisStart = 0;\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length;\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0;\n  end >>>= 0;\n  thisStart >>>= 0;\n  thisEnd >>>= 0;\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart;\n  var y = end - start;\n  var len = Math.min(x, y);\n\n  var thisCopy = this.slice(thisStart, thisEnd);\n  var targetCopy = target.slice(start, end);\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i];\n      y = targetCopy[i];\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n};\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset;\n    byteOffset = 0;\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff;\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000;\n  }\n  byteOffset = +byteOffset;  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1);\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset;\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1;\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0;\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding);\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (internalIsBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF; // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1;\n  var arrLength = arr.length;\n  var valLength = val.length;\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase();\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2;\n      arrLength /= 2;\n      valLength /= 2;\n      byteOffset /= 2;\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i;\n  if (dir) {\n    var foundIndex = -1;\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i;\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex;\n        foundIndex = -1;\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength;\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true;\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false;\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n};\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n};\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n};\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0;\n  var remaining = buf.length - offset;\n  if (!length) {\n    length = remaining;\n  } else {\n    length = Number(length);\n    if (length > remaining) {\n      length = remaining;\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length;\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2;\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16);\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed;\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8';\n    length = this.length;\n    offset = 0;\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset;\n    length = this.length;\n    offset = 0;\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0;\n    if (isFinite(length)) {\n      length = length | 0;\n      if (encoding === undefined) encoding = 'utf8';\n    } else {\n      encoding = length;\n      length = undefined;\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset;\n  if (length === undefined || length > remaining) length = remaining;\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8';\n\n  var loweredCase = false;\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n};\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n};\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return fromByteArray(buf)\n  } else {\n    return fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end);\n  var res = [];\n\n  var i = start;\n  while (i < end) {\n    var firstByte = buf[i];\n    var codePoint = null;\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1;\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint;\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte;\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1];\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F);\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint;\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F);\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint;\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n          fourthByte = buf[i + 3];\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F);\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint;\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD;\n      bytesPerSequence = 1;\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000;\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800);\n      codePoint = 0xDC00 | codePoint & 0x3FF;\n    }\n\n    res.push(codePoint);\n    i += bytesPerSequence;\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000;\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length;\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = '';\n  var i = 0;\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    );\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F);\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i]);\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length;\n\n  if (!start || start < 0) start = 0;\n  if (!end || end < 0 || end > len) end = len;\n\n  var out = '';\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i]);\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end);\n  var res = '';\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length;\n  start = ~~start;\n  end = end === undefined ? len : ~~end;\n\n  if (start < 0) {\n    start += len;\n    if (start < 0) start = 0;\n  } else if (start > len) {\n    start = len;\n  }\n\n  if (end < 0) {\n    end += len;\n    if (end < 0) end = 0;\n  } else if (end > len) {\n    end = len;\n  }\n\n  if (end < start) end = start;\n\n  var newBuf;\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end);\n    newBuf.__proto__ = Buffer.prototype;\n  } else {\n    var sliceLen = end - start;\n    newBuf = new Buffer(sliceLen, undefined);\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start];\n    }\n  }\n\n  return newBuf\n};\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n\n  return val\n};\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length);\n  }\n\n  var val = this[offset + --byteLength];\n  var mul = 1;\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul;\n  }\n\n  return val\n};\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  return this[offset]\n};\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] | (this[offset + 1] << 8)\n};\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return (this[offset] << 8) | this[offset + 1]\n};\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n};\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n};\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n  mul *= 0x80;\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n  return val\n};\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n  var i = byteLength;\n  var mul = 1;\n  var val = this[offset + --i];\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul;\n  }\n  mul *= 0x80;\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n  return val\n};\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n};\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset] | (this[offset + 1] << 8);\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n};\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset + 1] | (this[offset] << 8);\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n};\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n};\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n};\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return read(this, offset, true, 23, 4)\n};\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return read(this, offset, false, 23, 4)\n};\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return read(this, offset, true, 52, 8)\n};\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return read(this, offset, false, 52, 8)\n};\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!internalIsBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var mul = 1;\n  var i = 0;\n  this[offset] = value & 0xFF;\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF;\n  }\n\n  return offset + byteLength\n};\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  this[offset + i] = value & 0xFF;\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF;\n  }\n\n  return offset + byteLength\n};\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  this[offset] = (value & 0xff);\n  return offset + 1\n};\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1;\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8;\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff);\n    this[offset + 1] = (value >>> 8);\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n  return offset + 2\n};\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8);\n    this[offset + 1] = (value & 0xff);\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n  return offset + 2\n};\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1;\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff;\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24);\n    this[offset + 2] = (value >>> 16);\n    this[offset + 1] = (value >>> 8);\n    this[offset] = (value & 0xff);\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n  return offset + 4\n};\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24);\n    this[offset + 1] = (value >>> 16);\n    this[offset + 2] = (value >>> 8);\n    this[offset + 3] = (value & 0xff);\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n  return offset + 4\n};\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = 0;\n  var mul = 1;\n  var sub = 0;\n  this[offset] = value & 0xFF;\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1;\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength\n};\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  var sub = 0;\n  this[offset + i] = value & 0xFF;\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1;\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength\n};\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  if (value < 0) value = 0xff + value + 1;\n  this[offset] = (value & 0xff);\n  return offset + 1\n};\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff);\n    this[offset + 1] = (value >>> 8);\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n  return offset + 2\n};\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8);\n    this[offset + 1] = (value & 0xff);\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n  return offset + 2\n};\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff);\n    this[offset + 1] = (value >>> 8);\n    this[offset + 2] = (value >>> 16);\n    this[offset + 3] = (value >>> 24);\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n  return offset + 4\n};\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n  if (value < 0) value = 0xffffffff + value + 1;\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24);\n    this[offset + 1] = (value >>> 16);\n    this[offset + 2] = (value >>> 8);\n    this[offset + 3] = (value & 0xff);\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n  return offset + 4\n};\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4);\n  }\n  write(buf, value, offset, littleEndian, 23, 4);\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n};\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n};\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8);\n  }\n  write(buf, value, offset, littleEndian, 52, 8);\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n};\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n};\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0;\n  if (!end && end !== 0) end = this.length;\n  if (targetStart >= target.length) targetStart = target.length;\n  if (!targetStart) targetStart = 0;\n  if (end > 0 && end < start) end = start;\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length;\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start;\n  }\n\n  var len = end - start;\n  var i;\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    );\n  }\n\n  return len\n};\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start;\n      start = 0;\n      end = this.length;\n    } else if (typeof end === 'string') {\n      encoding = end;\n      end = this.length;\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0);\n      if (code < 256) {\n        val = code;\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255;\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0;\n  end = end === undefined ? this.length : end >>> 0;\n\n  if (!val) val = 0;\n\n  var i;\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val;\n    }\n  } else {\n    var bytes = internalIsBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString());\n    var len = bytes.length;\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len];\n    }\n  }\n\n  return this\n};\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g;\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '');\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '=';\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity;\n  var codePoint;\n  var length = string.length;\n  var leadSurrogate = null;\n  var bytes = [];\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i);\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint;\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n        leadSurrogate = codePoint;\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n    }\n\n    leadSurrogate = null;\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint);\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      );\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      );\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      );\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = [];\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF);\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo;\n  var byteArray = [];\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i);\n    hi = c >> 8;\n    lo = c % 256;\n    byteArray.push(lo);\n    byteArray.push(hi);\n  }\n\n  return byteArray\n}\n\n\nfunction base64ToBytes (str) {\n  return toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i];\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n\n\n// the following is from is-buffer, also by Feross Aboukhadijeh and with same lisence\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nfunction isBuffer(obj) {\n  return obj != null && (!!obj._isBuffer || isFastBuffer(obj) || isSlowBuffer(obj))\n}\n\nfunction isFastBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isFastBuffer(obj.slice(0, 0))\n}\n\nconst isHexString = (hex) => typeof hex === 'string' && /^0x[0-9A-Fa-f]*$/.test(hex);\nconst utf8ToHex = (str) => {\n    return Buffer.from(str, 'utf8').toString('hex');\n};\n\nvar _EthereumProvider_instances, _EthereumProvider_getBloctoProperties, _EthereumProvider_addToSwitchable, _EthereumProvider_checkNetworkMatched;\nfunction parseChainId(chainId) {\n    if (!chainId) {\n        return 1;\n    }\n    if (typeof chainId === 'number') {\n        return chainId;\n    }\n    else if (chainId.startsWith('0x')) {\n        return parseInt(chainId, 16);\n    }\n    return parseInt(chainId, 10);\n}\nclass EthereumProvider extends BloctoProvider {\n    constructor({ chainId, rpc, walletServer, appId }) {\n        super();\n        _EthereumProvider_instances.add(this);\n        this.networkVersion = '1'; // same as chainId but in decimal\n        // setup chainId\n        invariant(chainId, \"'chainId' is required\");\n        this.networkVersion = `${parseChainId(chainId)}`;\n        this.chainId = `0x${parseChainId(chainId).toString(16)}`;\n        // setup rpc\n        this.rpc = rpc || ETH_RPC_LIST[this.networkVersion];\n        invariant(this.rpc, \"'rpc' is required\");\n        // setup injectedWalletServer\n        this.injectedWalletServer = walletServer;\n        // NOTE: _blocto is not fully initialized yet at this point\n        // Any function should call #getBloctoProperties() to get the full _blocto properties\n        this._blocto = {\n            sessionKey: KEY_SESSION.prod,\n            walletServer: this.injectedWalletServer || '',\n            blockchainName: '',\n            networkType: '',\n            supportNetworkList: {},\n            switchableNetwork: {},\n        };\n        this.appId = appId || DEFAULT_APP_ID;\n    }\n    // DEPRECATED API: see https://docs.metamask.io/guide/ethereum-provider.html#ethereum-send-deprecated\n    send(methodOrPayload, paramsOrCallback) {\n        return __awaiter(this, void 0, void 0, function* () {\n            switch (true) {\n                // signature type 1: arg1 - JSON-RPC payload, arg2 - callback;\n                // ethereum.send(payload: JsonRpcRequest, callback: JsonRpcCallback): void;\n                // This signature is exactly like ethereum.sendAsync()\n                case paramsOrCallback instanceof Function:\n                    return this.sendAsync(methodOrPayload, paramsOrCallback);\n                // signature type 2: arg1 - JSON-RPC method name, arg2 - params array;\n                // ethereum.send(method: string, params?: Array<unknown>): Promise<JsonRpcResponse>;\n                // This signature is like an async ethereum.sendAsync() with method and params as arguments,\n                // instead of a JSON-RPC payload and callback\n                case typeof methodOrPayload === 'string' &&\n                    Array.isArray(paramsOrCallback):\n                    return this.sendAsync({\n                        jsonrpc: '2.0',\n                        method: methodOrPayload,\n                        params: paramsOrCallback,\n                    });\n                // signature type 3: arg1 - JSON-RPC payload(should be synchronous methods)\n                // ethereum.send(payload: JsonRpcRequest): unknown;\n                // This signature enables you to call some type of RPC methods synchronously\n                default:\n                    return this.sendAsync(methodOrPayload);\n            }\n        });\n    }\n    // DEPRECATED API: see https://docs.metamask.io/guide/ethereum-provider.html#legacy-methods implementation\n    // web3 v1.x BatchRequest still depends on it so we need to implement anyway \\_()_/\n    sendAsync(payload, callback) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const handleRequest = new Promise((resolve) => {\n                // web3 v1.x concat batched JSON-RPC requests to an array, handle it here\n                if (Array.isArray(payload)) {\n                    // collect transactions and send batch with custom method\n                    const transactions = payload\n                        .filter((request) => request.method === 'eth_sendTransaction')\n                        .map((request) => { var _a; return (_a = request.params) === null || _a === void 0 ? void 0 : _a[0]; });\n                    const idBase = Math.floor(Math.random() * 10000);\n                    const batchedRequestPayload = {\n                        method: 'blocto_sendBatchTransaction',\n                        params: transactions,\n                    };\n                    const batchResponsePromise = this.request(batchedRequestPayload);\n                    const requests = payload.map(({ method, params }, index) => method === 'eth_sendTransaction'\n                        ? batchResponsePromise\n                        : this.request({\n                            id: idBase + index + 1,\n                            jsonrpc: '2.0',\n                            method,\n                            params,\n                        }));\n                    // resolve response when all request are executed\n                    Promise.allSettled(requests)\n                        .then((responses) => resolve(responses.map((response, index) => {\n                        return {\n                            id: String(idBase + index + 1),\n                            jsonrpc: '2.0',\n                            method: payload[index].method,\n                            result: response.status === 'fulfilled'\n                                ? response.value\n                                : undefined,\n                            error: response.status !== 'fulfilled'\n                                ? response.reason\n                                : undefined,\n                        };\n                    })))\n                        .catch((error) => {\n                        throw dist.ethErrors.rpc.internal(error === null || error === void 0 ? void 0 : error.message);\n                    });\n                }\n                else {\n                    this.request(Object.assign(Object.assign({}, payload), { id: Number(payload.id) })).then(resolve);\n                }\n            });\n            // execute callback or return promise, depdends on callback arg given or not\n            if (callback) {\n                handleRequest\n                    .then((data) => callback(null, data))\n                    .catch((error) => callback(error));\n            }\n            else {\n                return handleRequest;\n            }\n        });\n    }\n    /**\n     * Sending userOperation using Blocto SDK.\n     * @param {IUserOperation} userOp - userOperation object\n     * @remarks No need to include nonce, initCode, and signature as parameters when using BloctoSDK to send userOperation.\n     * These parameters will be ignored.\n     * @returns {Promise<string>} - userOperation hash\n     */\n    sendUserOperation(userOp) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.request({\n                method: 'eth_sendUserOperation',\n                params: [userOp],\n            });\n        });\n    }\n    request(payload) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!(payload === null || payload === void 0 ? void 0 : payload.method))\n                throw dist.ethErrors.rpc.invalidRequest();\n            const existedSDK = window.ethereum;\n            if (existedSDK && existedSDK.isBlocto) {\n                if (payload.method === 'wallet_switchEthereumChain') {\n                    if (!((_b = (_a = payload === null || payload === void 0 ? void 0 : payload.params) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.chainId)) {\n                        throw dist.ethErrors.rpc.invalidParams();\n                    }\n                    return existedSDK.request(payload).then(() => {\n                        var _a, _b, _c;\n                        this.networkVersion = `${parseChainId((_a = payload === null || payload === void 0 ? void 0 : payload.params) === null || _a === void 0 ? void 0 : _a[0].chainId)}`;\n                        this.chainId = `0x${parseChainId((_b = payload === null || payload === void 0 ? void 0 : payload.params) === null || _b === void 0 ? void 0 : _b[0].chainId).toString(16)}`;\n                        this.rpc = (_c = switchableNetwork === null || switchableNetwork === void 0 ? void 0 : switchableNetwork[this.networkVersion]) === null || _c === void 0 ? void 0 : _c.rpc_url;\n                        return null;\n                    });\n                }\n                return existedSDK.request(payload);\n            }\n            const { blockchainName, switchableNetwork, sessionKey } = yield __classPrivateFieldGet(this, _EthereumProvider_instances, \"m\", _EthereumProvider_getBloctoProperties).call(this);\n            // method that doesn't require user to be connected\n            switch (payload.method) {\n                case 'eth_chainId': {\n                    return this.chainId;\n                }\n                case 'net_version': {\n                    return this.networkVersion;\n                }\n                case 'wallet_addEthereumChain': {\n                    return this.loadSwitchableNetwork((payload === null || payload === void 0 ? void 0 : payload.params) || []);\n                }\n                case 'eth_call': {\n                    const response = yield this.handleReadRequests(payload);\n                    if (!response || (response && !response.result && response.error)) {\n                        const errorMessage = ((_c = response === null || response === void 0 ? void 0 : response.error) === null || _c === void 0 ? void 0 : _c.message)\n                            ? response.error.message\n                            : 'Request failed';\n                        throw dist.ethErrors.rpc.internal(errorMessage);\n                    }\n                    return response.result;\n                }\n                case 'wallet_switchEthereumChain': {\n                    if (!((_e = (_d = payload === null || payload === void 0 ? void 0 : payload.params) === null || _d === void 0 ? void 0 : _d[0]) === null || _e === void 0 ? void 0 : _e.chainId))\n                        throw dist.ethErrors.rpc.invalidParams();\n                    const newChainId = payload.params[0].chainId;\n                    if (!getChainAddress(sessionKey, blockchainName)) {\n                        // directly switch network if user is not connected\n                        // TODO: add a confirm switch network dialog\n                        const phasedChainId = parseChainId(newChainId);\n                        if (!switchableNetwork[phasedChainId]) {\n                            throw dist.ethErrors.provider.custom({\n                                code: 4902,\n                                message: `Unrecognized chain ID \"${newChainId}\". Try adding the chain using wallet_addEthereumChain first.`,\n                            });\n                        }\n                        this.networkVersion = `${phasedChainId}`;\n                        this.chainId = `0x${phasedChainId.toString(16)}`;\n                        this.rpc = switchableNetwork[phasedChainId].rpc_url;\n                        this.eventListeners.chainChanged.forEach((listener) => listener(this.chainId));\n                        return null;\n                    }\n                    break;\n                }\n            }\n            // Method that requires user to be connected\n            if (!getChainAddress(sessionKey, blockchainName)) {\n                const email = (_f = payload === null || payload === void 0 ? void 0 : payload.params) === null || _f === void 0 ? void 0 : _f[0];\n                if (payload.method === 'eth_requestAccounts' && isEmail(email)) {\n                    yield this.enable(email);\n                }\n                else {\n                    yield this.enable();\n                }\n            }\n            try {\n                let response = null;\n                let result = null;\n                switch (payload.method) {\n                    case 'eth_requestAccounts':\n                        yield this.fetchAccounts();\n                    // eslint-disable-next-line\n                    case 'eth_accounts':\n                        result = getChainAddress(sessionKey, blockchainName);\n                        break;\n                    case 'eth_coinbase': {\n                        result = (_g = getChainAddress(sessionKey, blockchainName)) === null || _g === void 0 ? void 0 : _g[0];\n                        break;\n                    }\n                    case 'eth_signTypedData_v3':\n                    case 'eth_signTypedData':\n                    case 'eth_signTypedData_v4':\n                    case 'personal_sign':\n                    case 'eth_sign': {\n                        result = yield this.handleSign(payload);\n                        break;\n                    }\n                    case 'wallet_disconnect': {\n                        this.handleDisconnect();\n                        result = null;\n                        break;\n                    }\n                    case 'eth_sendTransaction':\n                        result = yield this.handleSendTransaction(payload);\n                        break;\n                    case 'blocto_sendBatchTransaction':\n                        result = yield this.handleSendBatchTransaction(payload);\n                        break;\n                    case 'eth_signTransaction':\n                    case 'eth_sendRawTransaction': {\n                        throw dist.ethErrors.rpc.methodNotSupported('Method Not Supported: ' + payload.method);\n                    }\n                    case 'eth_sendUserOperation':\n                        result = yield this.handleSendUserOperation(payload);\n                        break;\n                    case 'wallet_switchEthereumChain': {\n                        if (!((_j = (_h = payload === null || payload === void 0 ? void 0 : payload.params) === null || _h === void 0 ? void 0 : _h[0]) === null || _j === void 0 ? void 0 : _j.chainId)) {\n                            throw dist.ethErrors.rpc.invalidParams();\n                        }\n                        const oldAccount = (_k = getChainAddress(sessionKey, blockchainName)) === null || _k === void 0 ? void 0 : _k[0];\n                        const oldChainId = this.chainId;\n                        const newChainId = payload.params[0].chainId;\n                        if (!switchableNetwork[parseChainId(newChainId)]) {\n                            throw dist.ethErrors.provider.custom({\n                                code: 4902,\n                                message: `Unrecognized chain ID \"${parseChainId(payload.params[0].chainId)}\". Try adding the chain using wallet_addEthereumChain first.`,\n                            });\n                        }\n                        this.networkVersion = `${parseChainId(newChainId)}`;\n                        this.chainId = `0x${parseChainId(newChainId).toString(16)}`;\n                        this.rpc = switchableNetwork[this.networkVersion].rpc_url;\n                        yield this.enable()\n                            .then(([newAccount]) => {\n                            var _a;\n                            if (newAccount !== oldAccount) {\n                                (_a = this.eventListeners) === null || _a === void 0 ? void 0 : _a.accountsChanged.forEach((listener) => listener([newAccount]));\n                            }\n                            this.eventListeners.chainChanged.forEach((listener) => listener(this.chainId));\n                            result = null;\n                        })\n                            .catch((error) => {\n                            this.networkVersion = `${parseChainId(oldChainId)}`;\n                            this.chainId = `0x${parseChainId(oldChainId).toString(16)}`;\n                            this.rpc = switchableNetwork[this.networkVersion].rpc_url;\n                            throw error;\n                        });\n                        break;\n                    }\n                    case 'eth_estimateUserOperationGas':\n                    case 'eth_getUserOperationByHash':\n                    case 'eth_getUserOperationReceipt':\n                    case 'eth_supportedEntryPoints':\n                        result = yield this.handleBundler(payload);\n                        break;\n                    default:\n                        response = yield this.handleReadRequests(payload);\n                }\n                if (response && !response.result && response.error) {\n                    const errorMessage = response.error.message\n                        ? response.error.message\n                        : 'Request failed';\n                    throw dist.ethErrors.rpc.internal(errorMessage);\n                }\n                if (response)\n                    return response.result;\n                return result;\n            }\n            catch (error) {\n                throw dist.ethErrors.rpc.internal(error === null || error === void 0 ? void 0 : error.message);\n            }\n        });\n    }\n    bloctoApi(url, options) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { walletServer, blockchainName, sessionKey } = yield __classPrivateFieldGet(this, _EthereumProvider_instances, \"m\", _EthereumProvider_getBloctoProperties).call(this);\n            const sessionId = ((_a = getAccountStorage(sessionKey)) === null || _a === void 0 ? void 0 : _a.code) || '';\n            if (!sessionId) {\n                throw dist.ethErrors.provider.unauthorized();\n            }\n            return fetch(`${walletServer}/api/${blockchainName}${url}`, Object.assign({ headers: {\n                    'Content-Type': 'application/json',\n                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                    'Blocto-Application-Identifier': this.appId,\n                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                    'Blocto-Session-Identifier': sessionId,\n                } }, options))\n                .then((response) => responseSessionGuard(response, sessionKey, () => {\n                var _a;\n                (_a = this.eventListeners) === null || _a === void 0 ? void 0 : _a.disconnect.forEach((listener) => listener(dist.ethErrors.provider.disconnected()));\n            }))\n                .catch((e) => {\n                if ((e === null || e === void 0 ? void 0 : e.error_code) === 'unsupported_method') {\n                    throw dist.ethErrors.rpc.methodNotSupported('Method Not Supported: ' + e.message);\n                }\n                else {\n                    throw dist.ethErrors.rpc.server({\n                        code: -32005,\n                        message: `Blocto server error: ${e.message}`,\n                    });\n                }\n            });\n        });\n    }\n    responseListener(frame, objectKey) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { walletServer } = yield __classPrivateFieldGet(this, _EthereumProvider_instances, \"m\", _EthereumProvider_getBloctoProperties).call(this);\n            return new Promise((resolve, reject) => addSelfRemovableHandler('message', (event, removeEventListener) => {\n                const e = event;\n                if (e.origin === walletServer &&\n                    e.data.type === 'ETH:FRAME:RESPONSE') {\n                    if (e.data.status === 'APPROVED') {\n                        removeEventListener();\n                        detatchFrame(frame);\n                        resolve(e.data[objectKey]);\n                    }\n                    if (e.data.status === 'DECLINED') {\n                        removeEventListener();\n                        detatchFrame(frame);\n                        if (e.data.errorCode === 'incorrect_session_id') {\n                            this.handleDisconnect();\n                        }\n                        reject(dist.ethErrors.provider.userRejectedRequest(e.data.errorMessage));\n                    }\n                }\n                if (e.data.type === 'ETH:FRAME:CLOSE') {\n                    removeEventListener();\n                    detatchFrame(frame);\n                    reject(dist.ethErrors.provider.userRejectedRequest('User declined the request'));\n                }\n            }));\n        });\n    }\n    setIframe(url) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof window === 'undefined') {\n                throw dist.ethErrors.provider.custom({\n                    code: 1001,\n                    message: 'Blocto SDK only works in browser environment',\n                });\n            }\n            const { walletServer, blockchainName } = yield __classPrivateFieldGet(this, _EthereumProvider_instances, \"m\", _EthereumProvider_getBloctoProperties).call(this);\n            const frame = createFrame(`${walletServer}/${this.appId}/${blockchainName}${url}`);\n            attachFrame(frame);\n            return frame;\n        });\n    }\n    // eip-1102 alias\n    // DEPRECATED API: https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1102.md\n    enable(email) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { walletServer, blockchainName, sessionKey } = yield __classPrivateFieldGet(this, _EthereumProvider_instances, \"m\", _EthereumProvider_getBloctoProperties).call(this);\n            const existedSDK = window.ethereum;\n            if (existedSDK && existedSDK.isBlocto) {\n                if (existedSDK.chainId !== this.chainId) {\n                    yield existedSDK.request({\n                        method: 'wallet_addEthereumChain',\n                        params: [{ chainId: this.chainId }],\n                    });\n                    yield existedSDK.request({\n                        method: 'wallet_switchEthereumChain',\n                        params: [{ chainId: this.chainId }],\n                    });\n                    setChainAddress(sessionKey, blockchainName, [existedSDK.address]);\n                }\n                return new Promise((resolve, reject) => \n                // add a small delay to make sure the network has been switched\n                setTimeout(() => existedSDK.enable().then(resolve).catch(reject), 10));\n            }\n            const address = getChainAddress(sessionKey, blockchainName);\n            if (address) {\n                return new Promise((resolve) => {\n                    resolve(address);\n                });\n            }\n            const params = new URLSearchParams();\n            params.set('l6n', window.location.origin);\n            params.set('v', SDK_VERSION);\n            const emailParam = email && isEmail(email) ? `/${email}` : '';\n            const loginFrame = yield this.setIframe(`/authn${emailParam}?${params.toString()}`);\n            return new Promise((resolve, reject) => {\n                addSelfRemovableHandler('message', (event, removeListener) => {\n                    var _a;\n                    const e = event;\n                    if (e.origin === walletServer) {\n                        if (e.data.type === 'ETH:FRAME:RESPONSE') {\n                            removeListener();\n                            detatchFrame(loginFrame);\n                            (_a = this.eventListeners) === null || _a === void 0 ? void 0 : _a.connect.forEach((listener) => listener({ chainId: this.chainId }));\n                            setAccountStorage(sessionKey, {\n                                code: e.data.code,\n                                connected: true,\n                                accounts: {\n                                    [blockchainName]: [e.data.addr],\n                                },\n                            }, e.data.exp);\n                            resolve([e.data.addr]);\n                        }\n                        if (e.data.type === 'ETH:FRAME:CLOSE') {\n                            removeListener();\n                            detatchFrame(loginFrame);\n                            reject(dist.ethErrors.provider.userRejectedRequest());\n                        }\n                    }\n                });\n            });\n        });\n    }\n    fetchAccounts() {\n        return __awaiter(this, void 0, void 0, function* () {\n            __classPrivateFieldGet(this, _EthereumProvider_instances, \"m\", _EthereumProvider_checkNetworkMatched).call(this);\n            const { blockchainName, sessionKey } = yield __classPrivateFieldGet(this, _EthereumProvider_instances, \"m\", _EthereumProvider_getBloctoProperties).call(this);\n            const { accounts } = yield this.bloctoApi(`/accounts`);\n            setChainAddress(sessionKey, blockchainName, accounts);\n            return accounts;\n        });\n    }\n    handleReadRequests(payload) {\n        return __awaiter(this, void 0, void 0, function* () {\n            __classPrivateFieldGet(this, _EthereumProvider_instances, \"m\", _EthereumProvider_checkNetworkMatched).call(this);\n            return fetch(this.rpc, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(Object.assign({ id: 1, jsonrpc: '2.0' }, payload)),\n            })\n                .then((response) => response.json())\n                .catch((e) => {\n                throw dist.ethErrors.rpc.internal(e);\n            });\n        });\n    }\n    handleSign({ method, params }) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let message = '';\n            if (Array.isArray(params)) {\n                if (method === 'eth_sign') {\n                    message = isHexString(params[1])\n                        ? params[1].slice(2)\n                        : utf8ToHex(params[1]);\n                }\n                else if (method === 'personal_sign') {\n                    message = isHexString(params[0])\n                        ? params[0].slice(2)\n                        : utf8ToHex(params[0]);\n                }\n                else if ([\n                    'eth_signTypedData',\n                    'eth_signTypedData_v3',\n                    'eth_signTypedData_v4',\n                ].includes(method)) {\n                    message = params[1];\n                    const { domain } = JSON.parse(message);\n                    if (isHexString(domain.chainId)) {\n                        throw dist.ethErrors.rpc.invalidParams(`Provided chainId \"${domain.chainId}\" must be a number`);\n                    }\n                    if (parseChainId(domain.chainId) !== parseChainId(this.chainId)) {\n                        throw dist.ethErrors.rpc.invalidParams(`Provided chainId \"${domain.chainId}\" must match the active chainId \"${parseChainId(this.chainId)}\"`);\n                    }\n                }\n            }\n            __classPrivateFieldGet(this, _EthereumProvider_instances, \"m\", _EthereumProvider_checkNetworkMatched).call(this);\n            const { signatureId } = yield this.bloctoApi(`/user-signature`, { method: 'POST', body: JSON.stringify({ method, message }) });\n            const signFrame = yield this.setIframe(`/user-signature/${signatureId}`);\n            return this.responseListener(signFrame, 'signature');\n        });\n    }\n    handleSendTransaction(payload) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            __classPrivateFieldGet(this, _EthereumProvider_instances, \"m\", _EthereumProvider_checkNetworkMatched).call(this);\n            if (!isValidTransaction((_a = payload.params) === null || _a === void 0 ? void 0 : _a[0])) {\n                throw dist.ethErrors.rpc.invalidParams();\n            }\n            const { authorizationId } = yield this.bloctoApi(`/authz`, { method: 'POST', body: JSON.stringify(payload.params) });\n            const authzFrame = yield this.setIframe(`/authz/${authorizationId}`);\n            return this.responseListener(authzFrame, 'txHash');\n        });\n    }\n    handleSendBatchTransaction(payload) {\n        return __awaiter(this, void 0, void 0, function* () {\n            __classPrivateFieldGet(this, _EthereumProvider_instances, \"m\", _EthereumProvider_checkNetworkMatched).call(this);\n            const extractParams = (params) => params.map((param) => 'params' in param\n                ? param.params[0] // handle passing web3.eth.sendTransaction.request(...) as a parameter with params\n                : param);\n            const formatParams = extractParams(payload.params);\n            const copyPayload = Object.assign(Object.assign({}, payload), { params: formatParams });\n            if (!isValidTransactions(copyPayload.params)) {\n                throw dist.ethErrors.rpc.invalidParams();\n            }\n            return this.handleSendTransaction(copyPayload);\n        });\n    }\n    handleSendUserOperation(payload) {\n        return __awaiter(this, void 0, void 0, function* () {\n            __classPrivateFieldGet(this, _EthereumProvider_instances, \"m\", _EthereumProvider_checkNetworkMatched).call(this);\n            const { authorizationId } = yield this.bloctoApi(`/user-operation`, {\n                method: 'POST',\n                body: JSON.stringify(payload.params),\n            });\n            const userOPFrame = yield this.setIframe(`/user-operation/${authorizationId}`);\n            return this.responseListener(userOPFrame, 'userOpHash');\n        });\n    }\n    handleBundler(payload) {\n        return __awaiter(this, void 0, void 0, function* () {\n            __classPrivateFieldGet(this, _EthereumProvider_instances, \"m\", _EthereumProvider_checkNetworkMatched).call(this);\n            return this.bloctoApi(`/rpc/bundler`, {\n                method: 'POST',\n                body: JSON.stringify(Object.assign({ id: 1, jsonrpc: '2.0' }, payload)),\n            });\n        });\n    }\n    handleDisconnect() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const existedSDK = window.ethereum;\n            if (existedSDK && existedSDK.isBlocto) {\n                return existedSDK.disconnect();\n            }\n            const { sessionKey, blockchainName } = yield __classPrivateFieldGet(this, _EthereumProvider_instances, \"m\", _EthereumProvider_getBloctoProperties).call(this);\n            removeChainAddress(sessionKey, blockchainName);\n            (_a = this.eventListeners) === null || _a === void 0 ? void 0 : _a.disconnect.forEach((listener) => listener(dist.ethErrors.provider.disconnected()));\n        });\n    }\n    loadSwitchableNetwork(networkList) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // setup switchable list if user set networkList\n            if (networkList === null || networkList === void 0 ? void 0 : networkList.length) {\n                const listToAdd = networkList.map(({ chainId, rpcUrls }) => {\n                    if (!chainId)\n                        throw dist.ethErrors.rpc.invalidParams('Empty chainId');\n                    if (!(rpcUrls === null || rpcUrls === void 0 ? void 0 : rpcUrls.length))\n                        throw dist.ethErrors.rpc.invalidParams('Empty rpcUrls');\n                    return __classPrivateFieldGet(this, _EthereumProvider_instances, \"m\", _EthereumProvider_addToSwitchable).call(this, {\n                        chainId: `${parseChainId(chainId)}`,\n                        rpcUrls,\n                    });\n                });\n                return Promise.all(listToAdd).then(() => null);\n            }\n            else {\n                throw dist.ethErrors.rpc.invalidParams('Empty networkList');\n            }\n        });\n    }\n}\n_EthereumProvider_instances = new WeakSet(), _EthereumProvider_getBloctoProperties = function _EthereumProvider_getBloctoProperties() {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!Object.keys(this._blocto.supportNetworkList).length) {\n            yield getEvmSupport()\n                .then((result) => (this._blocto.supportNetworkList = result))\n                .catch((e) => {\n                throw dist.ethErrors.provider.custom({\n                    code: 1001,\n                    message: `Get blocto server failed: ${e.message}`,\n                });\n            });\n        }\n        const { chain_id, name, network_type, blocto_service_environment, display_name, } = this._blocto.supportNetworkList[this.networkVersion];\n        if (!chain_id)\n            throw dist.ethErrors.provider.unsupportedMethod(`Get support chain failed: ${this.networkVersion} might not be supported yet.`);\n        this._blocto = Object.assign(Object.assign({}, this._blocto), { sessionKey: ETH_SESSION_KEY_MAPPING[blocto_service_environment], walletServer: this.injectedWalletServer ||\n                ETH_ENV_WALLET_SERVER_MAPPING[blocto_service_environment], blockchainName: name, networkType: network_type, switchableNetwork: Object.assign(Object.assign({}, this._blocto.switchableNetwork), { [chain_id]: {\n                    name,\n                    display_name,\n                    network_type,\n                    wallet_web_url: this._blocto.walletServer,\n                    rpc_url: this.rpc,\n                } }) });\n        return this._blocto;\n    });\n}, _EthereumProvider_addToSwitchable = function _EthereumProvider_addToSwitchable({ chainId, rpcUrls, }) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const { supportNetworkList } = yield __classPrivateFieldGet(this, _EthereumProvider_instances, \"m\", _EthereumProvider_getBloctoProperties).call(this);\n        const { chain_id, name, display_name, network_type, blocto_service_environment, } = supportNetworkList[chainId];\n        const wallet_web_url = ETH_ENV_WALLET_SERVER_MAPPING[blocto_service_environment];\n        this._blocto.switchableNetwork[chain_id] = {\n            name,\n            display_name,\n            network_type,\n            wallet_web_url,\n            rpc_url: rpcUrls[0],\n        };\n    });\n}, _EthereumProvider_checkNetworkMatched = function _EthereumProvider_checkNetworkMatched() {\n    const existedSDK = window.ethereum;\n    if (existedSDK &&\n        existedSDK.isBlocto &&\n        parseChainId(existedSDK.chainId) !== parseChainId(this.chainId)) {\n        throw dist.ethErrors.provider.chainDisconnected();\n    }\n};\n\n// base-x encoding / decoding\n// Copyright (c) 2018 base-x contributors\n// Copyright (c) 2014-2018 The Bitcoin Core developers (base58.cpp)\n// Distributed under the MIT software license, see the accompanying\n// file LICENSE or http://www.opensource.org/licenses/mit-license.php.\nfunction base (ALPHABET) {\n  if (ALPHABET.length >= 255) { throw new TypeError('Alphabet too long') }\n  var BASE_MAP = new Uint8Array(256);\n  for (var j = 0; j < BASE_MAP.length; j++) {\n    BASE_MAP[j] = 255;\n  }\n  for (var i = 0; i < ALPHABET.length; i++) {\n    var x = ALPHABET.charAt(i);\n    var xc = x.charCodeAt(0);\n    if (BASE_MAP[xc] !== 255) { throw new TypeError(x + ' is ambiguous') }\n    BASE_MAP[xc] = i;\n  }\n  var BASE = ALPHABET.length;\n  var LEADER = ALPHABET.charAt(0);\n  var FACTOR = Math.log(BASE) / Math.log(256); // log(BASE) / log(256), rounded up\n  var iFACTOR = Math.log(256) / Math.log(BASE); // log(256) / log(BASE), rounded up\n  function encode (source) {\n    if (source instanceof Uint8Array) ; else if (ArrayBuffer.isView(source)) {\n      source = new Uint8Array(source.buffer, source.byteOffset, source.byteLength);\n    } else if (Array.isArray(source)) {\n      source = Uint8Array.from(source);\n    }\n    if (!(source instanceof Uint8Array)) { throw new TypeError('Expected Uint8Array') }\n    if (source.length === 0) { return '' }\n        // Skip & count leading zeroes.\n    var zeroes = 0;\n    var length = 0;\n    var pbegin = 0;\n    var pend = source.length;\n    while (pbegin !== pend && source[pbegin] === 0) {\n      pbegin++;\n      zeroes++;\n    }\n        // Allocate enough space in big-endian base58 representation.\n    var size = ((pend - pbegin) * iFACTOR + 1) >>> 0;\n    var b58 = new Uint8Array(size);\n        // Process the bytes.\n    while (pbegin !== pend) {\n      var carry = source[pbegin];\n            // Apply \"b58 = b58 * 256 + ch\".\n      var i = 0;\n      for (var it1 = size - 1; (carry !== 0 || i < length) && (it1 !== -1); it1--, i++) {\n        carry += (256 * b58[it1]) >>> 0;\n        b58[it1] = (carry % BASE) >>> 0;\n        carry = (carry / BASE) >>> 0;\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i;\n      pbegin++;\n    }\n        // Skip leading zeroes in base58 result.\n    var it2 = size - length;\n    while (it2 !== size && b58[it2] === 0) {\n      it2++;\n    }\n        // Translate the result into a string.\n    var str = LEADER.repeat(zeroes);\n    for (; it2 < size; ++it2) { str += ALPHABET.charAt(b58[it2]); }\n    return str\n  }\n  function decodeUnsafe (source) {\n    if (typeof source !== 'string') { throw new TypeError('Expected String') }\n    if (source.length === 0) { return new Uint8Array() }\n    var psz = 0;\n        // Skip and count leading '1's.\n    var zeroes = 0;\n    var length = 0;\n    while (source[psz] === LEADER) {\n      zeroes++;\n      psz++;\n    }\n        // Allocate enough space in big-endian base256 representation.\n    var size = (((source.length - psz) * FACTOR) + 1) >>> 0; // log(58) / log(256), rounded up.\n    var b256 = new Uint8Array(size);\n        // Process the characters.\n    while (source[psz]) {\n            // Decode character\n      var carry = BASE_MAP[source.charCodeAt(psz)];\n            // Invalid character\n      if (carry === 255) { return }\n      var i = 0;\n      for (var it3 = size - 1; (carry !== 0 || i < length) && (it3 !== -1); it3--, i++) {\n        carry += (BASE * b256[it3]) >>> 0;\n        b256[it3] = (carry % 256) >>> 0;\n        carry = (carry / 256) >>> 0;\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i;\n      psz++;\n    }\n        // Skip leading zeroes in b256.\n    var it4 = size - length;\n    while (it4 !== size && b256[it4] === 0) {\n      it4++;\n    }\n    var vch = new Uint8Array(zeroes + (size - it4));\n    var j = zeroes;\n    while (it4 !== size) {\n      vch[j++] = b256[it4++];\n    }\n    return vch\n  }\n  function decode (string) {\n    var buffer = decodeUnsafe(string);\n    if (buffer) { return buffer }\n    throw new Error('Non-base' + BASE + ' character')\n  }\n  return {\n    encode: encode,\n    decodeUnsafe: decodeUnsafe,\n    decode: decode\n  }\n}\nvar src = base;\n\nconst basex = src;\nconst ALPHABET = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';\n\nvar bs58 = basex(ALPHABET);\n\nvar bs58$1 = /*@__PURE__*/getDefaultExportFromCjs(bs58);\n\nlet Solana;\ntry {\n    Solana = require('@solana/web3.js');\n}\ncatch (_a) {\n    // prevent crash if there is no @solana/web3.js.\n}\nclass SolanaProvider extends BloctoProvider {\n    constructor({ net = 'mainnet-beta', server, appId, rpc, }) {\n        super();\n        invariant(net, \"'net' is required\");\n        invariant(Object.values(SOL_NET).includes(net), 'unsupported net');\n        this.net = net;\n        this.rpc =\n            rpc ||\n                (net === 'mainnet-beta'\n                    ? 'https://free.rpcpool.com'\n                    : `https://api.${net}.solana.com`);\n        this.server = server || SOL_NET_SERVER_MAPPING[this.net] || '';\n        this.appId = appId || DEFAULT_APP_ID;\n        this.sessionKey = SOL_SESSION_KEY_MAPPING[this.net];\n        if (!Solana) {\n            throw new Error('No @solana/web3.js installed. Please install it to interact with Solana.');\n        }\n    }\n    request(payload) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const existedSDK = window.solana;\n            if (existedSDK && existedSDK.isBlocto) {\n                return existedSDK.request(payload);\n            }\n            if (!getChainAddress(this.sessionKey, CHAIN.SOLANA)) {\n                yield this.connect();\n            }\n            try {\n                let response = null;\n                let result = null;\n                switch (payload.method) {\n                    case 'connect':\n                        result = yield this.fetchAccounts();\n                        break;\n                    case 'disconnect':\n                        this.disconnect();\n                        break;\n                    case 'getAccounts':\n                        result = ((_a = getChainAddress(this.sessionKey, CHAIN.SOLANA)) === null || _a === void 0 ? void 0 : _a.length)\n                            ? getChainAddress(this.sessionKey, CHAIN.SOLANA)\n                            : yield this.fetchAccounts();\n                        break;\n                    case 'getAccountInfo': {\n                        // Format the data as the same format returning from Connection.getAccountInfo from @solana/web3.js\n                        // ref: https://solana-labs.github.io/solana-web3.js/classes/Connection.html#getAccountInfo\n                        const accountInfo = yield this.handleReadRequests(payload);\n                        const [bufferData, encoding] = accountInfo.result.value.data;\n                        result = Object.assign(Object.assign({}, accountInfo.result.value), { data: Buffer.from(bufferData, encoding), owner: new Solana.PublicKey(accountInfo.result.value.owner) });\n                        break;\n                    }\n                    // custom JSON-RPC method\n                    case 'convertToProgramWalletTransaction':\n                        result = yield this.handleConvertTransaction(payload);\n                        break;\n                    // custom JSON-RPC method\n                    case 'signAndSendTransaction':\n                        result = yield this.handleSignAndSendTransaction(payload);\n                        break;\n                    // block user from using traditional methods\n                    case 'signTransaction':\n                    case 'signAllTransactions':\n                        throw new Error(`Blocto is program wallet, which doesn't support ${payload.method}. Use signAndSendTransaction instead.`);\n                    default:\n                        response = yield this.handleReadRequests(payload);\n                }\n                if (response && !response.result && response.error) {\n                    const errorMessage = response.error.message\n                        ? response.error.message\n                        : 'Request failed';\n                    throw new Error(errorMessage);\n                }\n                if (response)\n                    return response.result;\n                return result;\n            }\n            catch (error) {\n                console.error(error);\n                throw error;\n            }\n        });\n    }\n    connect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const existedSDK = window.solana;\n            if (existedSDK && existedSDK.isBlocto) {\n                return new Promise((resolve) => {\n                    existedSDK.on('connect', () => {\n                        setChainAddress(this.sessionKey, CHAIN.SOLANA, [\n                            existedSDK.publicKey.toBase58(),\n                        ]);\n                        resolve();\n                    });\n                    existedSDK.connect();\n                });\n            }\n            return new Promise((resolve, reject) => {\n                if (typeof window === 'undefined') {\n                    return reject('Currently only supported in browser');\n                }\n                if (getChainAddress(this.sessionKey, CHAIN.SOLANA)) {\n                    return resolve();\n                }\n                const location = encodeURIComponent(window.location.origin);\n                const loginFrame = createFrame(`${this.server}/${this.appId}/solana/authn?l6n=${location}&v=${SDK_VERSION}`);\n                attachFrame(loginFrame);\n                addSelfRemovableHandler('message', (event, removeListener) => {\n                    const e = event;\n                    if (e.origin === this.server) {\n                        if (e.data.type === 'SOL:FRAME:RESPONSE') {\n                            removeListener();\n                            detatchFrame(loginFrame);\n                            this.eventListeners.connect.forEach((listener) => listener(this.net));\n                            setAccountStorage(this.sessionKey, {\n                                code: e.data.code,\n                                connected: true,\n                                accounts: {\n                                    [CHAIN.SOLANA]: [e.data.addr],\n                                },\n                            }, e.data.exp);\n                            resolve();\n                        }\n                        if (e.data.type === 'SOL:FRAME:CLOSE') {\n                            removeListener();\n                            detatchFrame(loginFrame);\n                            reject(new Error('User declined the login request'));\n                        }\n                    }\n                });\n            });\n        });\n    }\n    disconnect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const existedSDK = window.solana;\n            if (existedSDK && existedSDK.isBlocto) {\n                yield existedSDK.disconnect();\n                return;\n            }\n            this.eventListeners.disconnect.forEach((listener) => listener(null));\n            removeChainAddress(this.sessionKey, CHAIN.SOLANA);\n        });\n    }\n    fetchAccounts() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const sessionId = ((_a = getAccountStorage(this.sessionKey)) === null || _a === void 0 ? void 0 : _a.code) || '';\n            const { accounts } = yield fetch(`${this.server}/api/solana/accounts`, {\n                headers: {\n                    // We already check the existence in the constructor\n                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                    'Blocto-Application-Identifier': this.appId,\n                    'Blocto-Session-Identifier': sessionId,\n                },\n            }).then((response) => responseSessionGuard(response, this.sessionKey));\n            setChainAddress(this.sessionKey, CHAIN.SOLANA, accounts);\n            return accounts;\n        });\n    }\n    handleReadRequests(payload) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return fetch(this.rpc, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(Object.assign({ id: 1, jsonrpc: '2.0' }, payload)),\n            }).then((response) => response.json());\n        });\n    }\n    // solana web3 utility\n    convertToProgramWalletTransaction(transaction) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const existedSDK = window.solana;\n            if (existedSDK && existedSDK.isBlocto) {\n                return existedSDK.convertToProgramWalletTransaction(transaction);\n            }\n            const message = yield this.request({\n                method: 'convertToProgramWalletTransaction',\n                params: {\n                    message: transaction.serializeMessage().toString('hex'),\n                },\n            });\n            return this.toTransaction(message, []);\n        });\n    }\n    // solana web3 utility\n    signAndSendTransaction(transaction, connection) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const existedSDK = window.solana;\n            if (existedSDK && existedSDK.isBlocto) {\n                return existedSDK.signAndSendTransaction(transaction);\n            }\n            const extra = {};\n            if (connection) {\n                if (connection.commitment)\n                    extra.commitment = connection.commitment;\n                // if the connection object passed-in has different rpc endpoint, reconnect to it\n                // eslint-disable-next-line no-underscore-dangle\n                const rpc = connection ? connection._rpcEndpoint : null;\n                if (rpc && rpc !== this.rpc) {\n                    this.rpc = rpc;\n                    this.disconnect();\n                    yield this.connect();\n                }\n            }\n            return this.request({\n                method: 'signAndSendTransaction',\n                params: Object.assign({ signatures: yield this.collectSignatures(transaction), message: transaction.serializeMessage().toString('hex') }, extra),\n            });\n        });\n    }\n    // solana web3 utility\n    // eslint-disable-next-line class-methods-use-this\n    toTransaction(raw, signatures) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const message = Solana.Message.from(Buffer.from(raw, 'hex'));\n            const transaction = new Solana.Transaction();\n            transaction.recentBlockhash = message.recentBlockhash;\n            if (message.header.numRequiredSignatures > 0) {\n                transaction.feePayer = message.accountKeys[0];\n            }\n            signatures.forEach((signature, index) => {\n                const sigPubkeyPair = {\n                    signature: signature === Solana.PublicKey.default.toBase58()\n                        ? null\n                        : bs58$1.decode(signature),\n                    publicKey: message.accountKeys[index],\n                };\n                transaction.signatures.push(sigPubkeyPair);\n            });\n            message.instructions.forEach((instruction) => {\n                const keys = instruction.accounts.map((account) => {\n                    const pubkey = message.accountKeys[account];\n                    return {\n                        pubkey,\n                        isSigner: account < message.header.numRequiredSignatures,\n                        isWritable: message.isAccountWritable(account),\n                    };\n                });\n                transaction.instructions.push(new Solana.TransactionInstruction({\n                    keys,\n                    programId: message.accountKeys[instruction.programIdIndex],\n                    data: bs58$1.decode(instruction.data),\n                }));\n            });\n            return transaction;\n        });\n    }\n    // solana web3 utility\n    // eslint-disable-next-line class-methods-use-this\n    collectSignatures(transaction) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return transaction.signatures.reduce((acc, cur) => {\n                if (cur.signature) {\n                    acc[cur.publicKey.toBase58()] = cur.signature.toString('hex');\n                }\n                return acc;\n            }, {});\n        });\n    }\n    handleConvertTransaction(payload) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const sessionId = ((_a = getAccountStorage(this.sessionKey)) === null || _a === void 0 ? void 0 : _a.code) || '';\n            return fetch(`${this.server}/api/solana/convertToWalletTx`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    // We already check the existence in the constructor\n                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                    'Blocto-Application-Identifier': this.appId,\n                    'Blocto-Session-Identifier': sessionId,\n                },\n                body: JSON.stringify(payload.params),\n            }).then((response) => responseSessionGuard(response, this.sessionKey));\n        });\n    }\n    handleSignAndSendTransaction(payload) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const sessionId = ((_a = getAccountStorage(this.sessionKey)) === null || _a === void 0 ? void 0 : _a.code) || '';\n            const { authorizationId } = yield fetch(`${this.server}/api/solana/authz`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    // We already check the existence in the constructor\n                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                    'Blocto-Application-Identifier': this.appId,\n                    'Blocto-Session-Identifier': sessionId,\n                },\n                body: JSON.stringify(payload.params),\n            }).then((response) => responseSessionGuard(response, this.sessionKey));\n            if (typeof window === 'undefined') {\n                throw new Error('Currently only supported in browser');\n            }\n            const authzFrame = createFrame(`${this.server}/${this.appId}/solana/authz/${authorizationId}`);\n            attachFrame(authzFrame);\n            return new Promise((resolve, reject) => addSelfRemovableHandler('message', (event, removeEventListener) => {\n                const e = event;\n                if (e.origin === this.server &&\n                    e.data.type === 'SOL:FRAME:RESPONSE') {\n                    if (e.data.status === 'APPROVED') {\n                        removeEventListener();\n                        detatchFrame(authzFrame);\n                        resolve(e.data.txHash);\n                    }\n                    if (e.data.status === 'DECLINED') {\n                        removeEventListener();\n                        detatchFrame(authzFrame);\n                        if (e.data.errorCode === 'incorrect_session_id') {\n                            this.disconnect();\n                        }\n                        reject(new Error(e.data.errorMessage));\n                    }\n                }\n            }));\n        });\n    }\n}\n\nconst checkMessagePayloadFormat = (payload) => {\n    var _a, _b;\n    const formattedPayload = Object.assign({}, payload);\n    const { message, nonce, address, application, chainId } = payload;\n    if (typeof message !== 'string') {\n        formattedPayload.message = (_a = String(message)) !== null && _a !== void 0 ? _a : '';\n    }\n    if (typeof nonce !== 'string') {\n        formattedPayload.nonce = (_b = String(nonce)) !== null && _b !== void 0 ? _b : '';\n    }\n    if (address && typeof address !== 'boolean') {\n        formattedPayload.address = !!address;\n    }\n    if (application && typeof application !== 'boolean') {\n        formattedPayload.application = !!application;\n    }\n    if (chainId && typeof chainId !== 'boolean') {\n        formattedPayload.chainId = !!chainId;\n    }\n    return formattedPayload;\n};\nclass AptosProvider extends BloctoProvider {\n    constructor({ chainId, server, appId }) {\n        super();\n        this.publicKey = [];\n        this.authKey = '';\n        invariant(chainId, \"'chainId' is required\");\n        invariant(appId, 'It is necessary to interact with Blocto wallet via your app id. Please visit https://developers.blocto.app for more details.');\n        this.chainId = chainId;\n        this.networkName = APT_CHAIN_ID_NAME_MAPPING[chainId];\n        this.api = APT_CHAIN_ID_RPC_MAPPING[chainId];\n        this.sessionKey = APT_SESSION_KEY_MAPPING[chainId];\n        const defaultServer = APT_CHAIN_ID_SERVER_MAPPING[chainId];\n        this.appId = appId || DEFAULT_APP_ID;\n        this.server = server || defaultServer || '';\n    }\n    get publicAccount() {\n        var _a;\n        return {\n            address: ((_a = getChainAddress(this.sessionKey, CHAIN.APTOS)) === null || _a === void 0 ? void 0 : _a[0]) || null,\n            publicKey: this.publicKey.length ? this.publicKey : null,\n            // @todo: provide authkey\n            authKey: null,\n            minKeysRequired: 2,\n        };\n    }\n    network() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return {\n                name: this.networkName,\n                api: this.api,\n                chainId: this.chainId.toString(),\n            };\n        });\n    }\n    isConnected() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            return !!((_a = getAccountStorage(this.sessionKey)) === null || _a === void 0 ? void 0 : _a.code);\n        });\n    }\n    signTransaction(transaction) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const existedSDK = window.bloctoAptos;\n            if (existedSDK) {\n                return existedSDK.signTransaction(transaction);\n            }\n            const hasConnected = yield this.isConnected();\n            if (!hasConnected) {\n                yield this.connect();\n            }\n            if (!((_a = getChainAddress(this.sessionKey, CHAIN.APTOS)) === null || _a === void 0 ? void 0 : _a.length)) {\n                throw new Error('Fail to get account');\n            }\n            throw new Error('signTransaction method not supported.');\n        });\n    }\n    disconnect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const existedSDK = window.bloctoAptos;\n            if (existedSDK) {\n                yield existedSDK.disconnect();\n                return;\n            }\n            removeChainAddress(this.sessionKey, CHAIN.APTOS);\n        });\n    }\n    signAndSubmitTransaction(transaction, txOptions = {}) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            const existedSDK = window.bloctoAptos;\n            if (existedSDK) {\n                return existedSDK.signAndSubmitTransaction(transaction, txOptions);\n            }\n            const hasConnected = yield this.isConnected();\n            if (!hasConnected) {\n                yield this.connect();\n            }\n            if (!((_a = getChainAddress(this.sessionKey, CHAIN.APTOS)) === null || _a === void 0 ? void 0 : _a.length)) {\n                throw new Error('Fail to get account');\n            }\n            const sessionId = ((_b = getAccountStorage(this.sessionKey)) === null || _b === void 0 ? void 0 : _b.code) || '';\n            const { authorizationId } = yield fetch(`${this.server}/api/aptos/authz`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    // We already check the existence in the constructor\n                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                    'Blocto-Application-Identifier': this.appId,\n                    'Blocto-Session-Identifier': sessionId,\n                },\n                body: JSON.stringify(Object.assign(Object.assign({}, transaction), txOptions)),\n            }).then((response) => responseSessionGuard(response, this.sessionKey));\n            if (typeof window === 'undefined') {\n                throw new Error('Currently only supported in browser');\n            }\n            const authzFrame = createFrame(`${this.server}/${this.appId}/aptos/authz/${authorizationId}`);\n            attachFrame(authzFrame);\n            return new Promise((resolve, reject) => addSelfRemovableHandler('message', (event, removeEventListener) => {\n                const e = event;\n                if (e.origin === this.server &&\n                    e.data.type === 'APTOS:FRAME:RESPONSE') {\n                    if (e.data.status === 'APPROVED') {\n                        removeEventListener();\n                        detatchFrame(authzFrame);\n                        resolve({ hash: e.data.txHash });\n                    }\n                    if (e.data.status === 'DECLINED') {\n                        removeEventListener();\n                        detatchFrame(authzFrame);\n                        if (e.data.errorCode === 'incorrect_session_id') {\n                            this.disconnect();\n                        }\n                        reject(new Error(e.data.errorMessage));\n                    }\n                }\n            }));\n        });\n    }\n    signMessage(payload) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            const existedSDK = window.bloctoAptos;\n            const formattedPayload = checkMessagePayloadFormat(payload);\n            if (existedSDK) {\n                return existedSDK.signMessage(formattedPayload);\n            }\n            const hasConnected = yield this.isConnected();\n            if (!hasConnected) {\n                yield this.connect();\n            }\n            if (!((_a = getChainAddress(this.sessionKey, CHAIN.APTOS)) === null || _a === void 0 ? void 0 : _a.length)) {\n                throw new Error('Fail to get account');\n            }\n            if (typeof window === 'undefined') {\n                throw new Error('Currently only supported in browser');\n            }\n            const sessionId = ((_b = getAccountStorage(this.sessionKey)) === null || _b === void 0 ? void 0 : _b.code) || '';\n            const { signatureId } = yield fetch(`${this.server}/api/aptos/user-signature`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    // We already check the existence in the constructor\n                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                    'Blocto-Application-Identifier': this.appId,\n                    'Blocto-Session-Identifier': sessionId,\n                },\n                body: JSON.stringify(formattedPayload),\n            }).then((response) => responseSessionGuard(response, this.sessionKey));\n            const url = `${this.server}/${this.appId}/aptos/user-signature/${signatureId}`;\n            const signFrame = createFrame(url);\n            attachFrame(signFrame);\n            return new Promise((resolve, reject) => addSelfRemovableHandler('message', (event, removeEventListener) => {\n                const e = event;\n                if (e.origin === this.server &&\n                    e.data.type === 'APTOS:FRAME:RESPONSE') {\n                    if (e.data.status === 'APPROVED') {\n                        removeEventListener();\n                        detatchFrame(signFrame);\n                        resolve(e.data);\n                    }\n                    if (e.data.status === 'DECLINED') {\n                        removeEventListener();\n                        detatchFrame(signFrame);\n                        if (e.data.errorCode === 'incorrect_session_id') {\n                            this.disconnect();\n                        }\n                        reject(new Error(e.data.errorMessage));\n                    }\n                }\n            }));\n        });\n    }\n    connect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const existedSDK = window.bloctoAptos;\n            if (existedSDK) {\n                return new Promise((resolve, reject) => \n                // add a small delay to make sure the network has been switched\n                setTimeout(() => existedSDK.connect().then(resolve).catch(reject), 10));\n            }\n            return new Promise((resolve, reject) => {\n                var _a, _b;\n                if (typeof window === 'undefined') {\n                    return reject('Currently only supported in browser');\n                }\n                if ((_a = getChainAddress(this.sessionKey, CHAIN.APTOS)) === null || _a === void 0 ? void 0 : _a.length) {\n                    return resolve({\n                        address: ((_b = getChainAddress(this.sessionKey, CHAIN.APTOS)) === null || _b === void 0 ? void 0 : _b[0]) || null,\n                        publicKey: this.publicKey,\n                        authKey: null,\n                        minKeysRequired: 2,\n                    });\n                }\n                const location = encodeURIComponent(window.location.origin);\n                const loginFrame = createFrame(`${this.server}/${this.appId}/aptos/authn?l6n=${location}&v=${SDK_VERSION}}`);\n                attachFrame(loginFrame);\n                addSelfRemovableHandler('message', (event, removeListener) => __awaiter(this, void 0, void 0, function* () {\n                    var _c, _d, _e;\n                    const e = event;\n                    if (e.origin === this.server) {\n                        if (e.data.type === 'APTOS:FRAME:RESPONSE') {\n                            removeListener();\n                            detatchFrame(loginFrame);\n                            setAccountStorage(this.sessionKey, {\n                                code: e.data.code,\n                                connected: true,\n                                accounts: {\n                                    [CHAIN.APTOS]: [e.data.addr],\n                                },\n                            }, e.data.exp);\n                            if ((_c = getChainAddress(this.sessionKey, CHAIN.APTOS)) === null || _c === void 0 ? void 0 : _c.length) {\n                                try {\n                                    const { public_keys: publicKeys } = yield fetch(`${this.server}/blocto/aptos/accounts/${(_d = getChainAddress(this.sessionKey, CHAIN.APTOS)) === null || _d === void 0 ? void 0 : _d[0]}`).then((response) => response.json());\n                                    this.publicKey = publicKeys || [];\n                                    resolve({\n                                        address: ((_e = getChainAddress(this.sessionKey, CHAIN.APTOS)) === null || _e === void 0 ? void 0 : _e[0]) || '',\n                                        publicKey: this.publicKey,\n                                        authKey: null,\n                                        minKeysRequired: 2,\n                                    });\n                                }\n                                catch (err) {\n                                    return reject(e);\n                                }\n                            }\n                            else {\n                                // @todo: better error\n                                return reject();\n                            }\n                        }\n                        if (e.data.type === 'APTOS:FRAME:CLOSE') {\n                            removeListener();\n                            detatchFrame(loginFrame);\n                            reject(new Error('User declined the login request'));\n                        }\n                    }\n                }));\n            });\n        });\n    }\n    fetchAddress() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const sessionId = ((_a = getAccountStorage(this.sessionKey)) === null || _a === void 0 ? void 0 : _a.code) || '';\n            const { accounts } = yield fetch(`${this.server}/api/aptos/accounts`, {\n                headers: {\n                    // We already check the existence in the constructor\n                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                    'Blocto-Application-Identifier': this.appId,\n                    'Blocto-Session-Identifier': sessionId,\n                },\n            }).then((response) => responseSessionGuard(response, this.sessionKey));\n            setChainAddress(this.sessionKey, CHAIN.APTOS, accounts);\n            return (accounts === null || accounts === void 0 ? void 0 : accounts[0]) || '';\n        });\n    }\n}\n\nclass BloctoSDK {\n    constructor({ appId, ethereum, solana, aptos }) {\n        if (ethereum) {\n            this.ethereum = new EthereumProvider(Object.assign(Object.assign({}, ethereum), { appId }));\n        }\n        if (solana) {\n            this.solana = new SolanaProvider(Object.assign(Object.assign({}, solana), { appId }));\n        }\n        if (aptos) {\n            this.aptos = new AptosProvider(Object.assign(Object.assign({}, aptos), { appId }));\n        }\n    }\n}\n\nexport { BloctoSDK as default };\n","import { _ as _defineProperty } from '../../../../dist/defineProperty-350fc508.browser.esm.js';\nimport { W as WagmiConnector } from '../../../../dist/WagmiConnector-2f14002d.browser.esm.js';\nimport { U as UserRejectedRequestError, a as ConnectorNotFoundError, S as SwitchChainError } from '../../../../dist/errors-9edc08c8.browser.esm.js';\nimport BloctoSDK from '@blocto/sdk';\nimport { utils, providers } from 'ethers';\nimport { w as walletIds } from '../../../../dist/walletIds-dff6dced.browser.esm.js';\nimport { g as getValidPublicRPCUrl } from '../../../../dist/url-a45219bd.browser.esm.js';\nimport { n as normalizeChainId } from '../../../../dist/normalizeChainId-1fb9aedf.browser.esm.js';\nimport '@thirdweb-dev/chains';\nimport 'eventemitter3';\n\nclass BloctoConnector extends WagmiConnector {\n  constructor(_ref) {\n    let {\n      chains,\n      options = {}\n    } = _ref;\n    super({\n      chains,\n      options\n    });\n    _defineProperty(this, \"id\", walletIds.blocto);\n    _defineProperty(this, \"name\", \"Blocto\");\n    _defineProperty(this, \"ready\", true);\n    this._onAccountsChangedBind = this.onAccountsChanged.bind(this);\n    this._onChainChangedBind = this.onChainChanged.bind(this);\n    this._onDisconnectBind = this.onDisconnect.bind(this);\n  }\n  async connect(config) {\n    try {\n      const provider = await this.getProvider(config);\n      this.setupListeners();\n      this.emit(\"message\", {\n        type: \"connecting\"\n      });\n      const accounts = await provider.request({\n        method: \"eth_requestAccounts\"\n      });\n      const account = utils.getAddress(accounts[0]);\n      const id = await this.getChainId();\n      const unsupported = this.isChainUnsupported(id);\n      return {\n        account,\n        chain: {\n          id,\n          unsupported\n        },\n        provider\n      };\n    } catch (error) {\n      this._handleConnectReset();\n      if (this._isUserRejectedRequestError(error)) {\n        throw new UserRejectedRequestError(error);\n      }\n      throw error;\n    }\n  }\n  async disconnect() {\n    const provider = await this.getProvider();\n    await provider.request({\n      method: \"wallet_disconnect\"\n    });\n    this.removeListeners();\n    this._handleConnectReset();\n  }\n  async getAccount() {\n    const provider = await this.getProvider();\n    const accounts = await provider.request({\n      method: \"eth_accounts\"\n    });\n    const [address] = accounts || [];\n    if (!address) {\n      throw new Error(\"No accounts found\");\n    }\n    return address;\n  }\n  async getChainId() {\n    const provider = await this.getProvider();\n    const chainId = await provider.request({\n      method: \"eth_chainId\"\n    });\n    return normalizeChainId(chainId);\n  }\n  getProvider() {\n    let {\n      chainId\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (!this._provider) {\n      const _chainId = chainId ?? this.options.chainId ?? this.chains[0]?.chainId ?? 1;\n      const _rpc = this.chains.find(x => x.chainId === _chainId)?.rpc[0];\n      this._provider = new BloctoSDK({\n        ethereum: {\n          chainId: _chainId,\n          rpc: _rpc\n        },\n        appId: this.options.appId\n      })?.ethereum;\n    }\n    if (!this._provider) {\n      throw new ConnectorNotFoundError();\n    }\n    return Promise.resolve(this._provider);\n  }\n  async getSigner() {\n    let {\n      chainId\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const [provider, account] = await Promise.all([this.getProvider(), this.getAccount()]);\n    return new providers.Web3Provider(provider, chainId).getSigner(account);\n  }\n  async isAuthorized() {\n    return !!this._provider?._blocto?.sessionKey ?? false;\n  }\n  async switchChain(chainId) {\n    const provider = await this.getProvider();\n    const id = utils.hexValue(chainId);\n    const chain = this.chains.find(x => x.chainId === chainId);\n    if (!chain) {\n      throw new SwitchChainError(new Error(\"chain not found on connector.\"));\n    }\n    const isBloctoSupportChain = provider._blocto.supportNetworkList[`${chainId}`];\n    if (!isBloctoSupportChain) {\n      throw new SwitchChainError(new Error(`Blocto unsupported chain: ${id}`));\n    }\n    try {\n      await provider.request({\n        method: \"wallet_addEthereumChain\",\n        params: [{\n          chainId: id,\n          rpcUrls: getValidPublicRPCUrl(chain) // no client id on purpose here\n        }]\n      });\n      await provider.request({\n        method: \"wallet_switchEthereumChain\",\n        params: [{\n          chainId: id\n        }]\n      });\n      return chain;\n    } catch (error) {\n      if (this._isUserRejectedRequestError(error)) {\n        throw new UserRejectedRequestError(error);\n      }\n      throw new SwitchChainError(error);\n    }\n  }\n  onAccountsChanged() {\n    // not supported yet\n  }\n  async onChainChanged(chain) {\n    const id = normalizeChainId(chain);\n    const unsupported = this.isChainUnsupported(id);\n    const account = await this.getAccount();\n    this.emit(\"change\", {\n      chain: {\n        id,\n        unsupported\n      },\n      account\n    });\n  }\n  onDisconnect() {\n    this.emit(\"disconnect\");\n  }\n  async setupListeners() {\n    const provider = await this.getProvider();\n    provider.on(\"accountsChanged\", this._onAccountsChangedBind);\n    provider.on(\"chainChanged\", this._onChainChangedBind);\n    provider.on(\"disconnect\", this._onDisconnectBind);\n  }\n  async removeListeners() {\n    const provider = await this.getProvider();\n    provider.off(\"accountsChanged\", this._onAccountsChangedBind);\n    provider.off(\"chainChanged\", this._onChainChangedBind);\n    provider.off(\"disconnect\", this._onDisconnectBind);\n  }\n  _isUserRejectedRequestError(error) {\n    return /(user rejected)/i.test(error.message);\n  }\n  _handleConnectReset() {\n    this._provider = undefined;\n  }\n}\n\nexport { BloctoConnector };\n"],"names":["WagmiConnector","EventEmitter","constructor","_ref","chains","defaultChains","options","super","this","getBlockExplorerUrls","chain","_chain$explorers$map","_chain$explorers","explorers","map","x","url","length","undefined","isChainUnsupported","chainId","some","updateChains","RpcError","Error","message","cause","code","data","Number","isInteger","concat","JSON","stringify","ProviderRpcError","AddChainError","arguments","_defineProperty","ChainNotConfiguredError","connectorId","ConnectorNotFoundError","ResourceUnavailableError","SwitchChainError","UserRejectedRequestError","normalizeChainId","parseInt","trim","substring","KEY_SESSION","CHAIN","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__classPrivateFieldGet","receiver","state","kind","f","TypeError","has","call","get","invariant","condition","format","SuppressedError","memoryStorage","window","storage","getItem","key","setItem","removeItem","isSupported","sessionStorage","error","defaultValue","parse","SyntaxError","getAccountStorage","rawAccountStorage","Date","getTime","expiry","v","SDK_VERSION","setAccountStorage","_a","_b","_c","newAccountStorage","connected","accounts","Object","assign","LOGIN_PERSISTING_TIME","getChainAddress","setChainAddress","account","removeChainAddress","ETH_RPC_LIST","ETH_ENV_WALLET_SERVER_MAPPING","prod","staging","dev","ETH_SESSION_KEY_MAPPING","SOL_NET","MainnetBeta","Testnet","Devnet","SOL_NET_SERVER_MAPPING","SOL_SESSION_KEY_MAPPING","APT_SESSION_KEY_MAPPING","APT_CHAIN_ID_SERVER_MAPPING","WalletAdapterNetwork","APT_CHAIN_ID_NAME_MAPPING","Mainnet","Testing","Premainnet","APT_CHAIN_ID_RPC_MAPPING","EIP1193_EVENTS","DEFAULT_APP_ID","BloctoProvider","isBlocto","isConnecting","eventListeners","off","removeListener","forEach","event","appId","request","payload","on","listener","includes","push","once","index","findIndex","item","splice","createFrame","frame","document","createElement","setAttribute","attachFrame","body","appendChild","detatchFrame","parentNode","removeChild","Function","addSelfRemovableHandler","eventType","handler","target","addEventListener","removeEventListener","responseSessionGuard","response","disconnectHandler","status","ok","json","error_code","isEmail","test","isValidTransaction","transaction","getDefaultExportFromCjs","__esModule","prototype","hasOwnProperty","dist","_classCallCheck","instance","Constructor","_typeof","obj","Symbol","iterator","_toPropertyKey","arg","input","hint","prim","toPrimitive","res","String","_toPrimitive","_defineProperties","props","i","descriptor","enumerable","configurable","writable","defineProperty","_createClass","protoProps","staticProps","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_inherits","subClass","superClass","create","_possibleConstructorReturn","self","ReferenceError","_assertThisInitialized","_getPrototypeOf","getPrototypeOf","_construct","Parent","args","Class","Reflect","construct","sham","Proxy","Boolean","valueOf","_isNativeReflectConstruct$1","a","_wrapNativeSuper","_cache","Map","fn","toString","indexOf","set","Wrapper","classes","fastSafeStringify","stable","deterministicStringify","stableStringify","LIMIT_REPLACE_NODE","CIRCULAR_REPLACE_NODE","arr","replacerStack","defaultOptions","depthLimit","MAX_SAFE_INTEGER","edgesLimit","replacer","spacer","decirc","replaceGetterValues","_","part","pop","setReplace","replace","val","k","parent","propertyDescriptor","getOwnPropertyDescriptor","edgeIndex","stack","depth","Array","isArray","keys","compareFunction","b","tmp","deterministicDecirc","toJSON","sort","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","Super","NewTarget","EthereumProviderError","EthereumRpcError","fast_safe_stringify_1","_Error","_super","_this","serialized","serialize","stringifyReplacer","_EthereumRpcError","_super2","isValidEthProviderCode","utils","errorConstants","_arrayLikeToArray","len","arr2","_slicedToArray","_arrayWithHoles","_i","_s","_e","_x","_r","_arr","_n","_d","err","_iterableToArrayLimit","minLen","n","slice","name","from","_unsupportedIterableToArray","_nonIterableRest","errorValues","errorCodes","rpc","invalidInput","resourceNotFound","resourceUnavailable","transactionRejected","methodNotSupported","limitExceeded","invalidRequest","methodNotFound","invalidParams","internal","provider","userRejectedRequest","unauthorized","unsupportedMethod","disconnected","chainDisconnected","standard","exports","serializeError","isValidCode","getMessageFromCode","JSON_RPC_SERVER_ERROR_MESSAGE","error_constants_1","classes_1","FALLBACK_ERROR_CODE","FALLBACK_MESSAGE","FALLBACK_ERROR","fallbackMessage","codeString","hasKey","isJsonRpcServerError","assignOriginalError","_ref$fallbackError","fallbackError","_ref$shouldIncludeSta","shouldIncludeStack","_error","originalError","errors","ethErrors","utils_1","getEthJsonRpcError","_parseOpts2","parseOpts","getEthProviderError","_parseOpts4","server","opts","custom","errors_1","global$1","global","lookup","revLookup","Arr","Uint8Array","inited","init","charCodeAt","encodeChunk","uint8","start","end","num","output","join","fromByteArray","extraBytes","parts","maxChunkLength","len2","read","buffer","offset","isLE","mLen","nBytes","m","eLen","eMax","eBias","nBits","d","s","NaN","Infinity","Math","pow","write","c","rt","abs","isNaN","floor","log","LN2","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","encodingOrOffset","allocUnsafe","ArrayBuffer","array","byteOffset","byteLength","fromArrayLike","fromArrayBuffer","string","encoding","isEncoding","actual","fromString","internalIsBuffer","checked","copy","type","fromObject","assertSize","size","_isBuffer","isView","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","buf","readUInt16BE","foundIndex","found","j","hexWrite","remaining","strLen","parsed","substr","utf8Write","blitBuffer","asciiWrite","str","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","min","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","decodeCodePointsArray","poolSize","_augment","species","alloc","fill","allocUnsafeSlow","isBuffer","isFastBuffer","readFloatLE","isSlowBuffer","compare","y","list","pos","swap16","swap32","swap64","equals","inspect","match","thisStart","thisEnd","thisCopy","targetCopy","isFinite","ret","out","toHex","bytes","checkOffset","ext","checkInt","max","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","subarray","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","leadSurrogate","b64","l","placeHolders","L","toByteArray","stringtrim","base64clean","src","dst","isHexString","hex","utf8ToHex","_EthereumProvider_instances","_EthereumProvider_getBloctoProperties","_EthereumProvider_addToSwitchable","_EthereumProvider_checkNetworkMatched","parseChainId","startsWith","EthereumProvider","_ref2","walletServer","add","networkVersion","injectedWalletServer","_blocto","sessionKey","blockchainName","networkType","supportNetworkList","switchableNetwork","send","methodOrPayload","paramsOrCallback","sendAsync","jsonrpc","method","params","callback","handleRequest","transactions","filter","idBase","random","batchedRequestPayload","batchResponsePromise","requests","_ref3","id","allSettled","responses","reason","catch","sendUserOperation","userOp","_f","_g","_h","_j","_k","existedSDK","ethereum","rpc_url","loadSwitchableNetwork","handleReadRequests","errorMessage","newChainId","phasedChainId","chainChanged","email","enable","fetchAccounts","handleSign","handleDisconnect","handleSendTransaction","handleSendBatchTransaction","handleSendUserOperation","oldAccount","oldChainId","_ref4","newAccount","accountsChanged","handleBundler","bloctoApi","sessionId","fetch","headers","disconnect","responseListener","objectKey","origin","errorCode","setIframe","address","setTimeout","URLSearchParams","location","emailParam","loginFrame","connect","addr","exp","_ref5","domain","signatureId","signFrame","authorizationId","authzFrame","formatParams","param","copyPayload","every","tx","userOPFrame","networkList","listToAdd","_ref6","rpcUrls","all","WeakSet","networks","reduce","chain_id","getEvmSupport","network_type","blocto_service_environment","display_name","wallet_web_url","_ref7","ALPHABET","BASE_MAP","charAt","xc","BASE","LEADER","FACTOR","iFACTOR","decodeUnsafe","source","psz","zeroes","b256","carry","it3","it4","vch","encode","pbegin","pend","b58","it1","it2","repeat","decode","bs58$1","Solana","require","SolanaProvider","_ref8","net","values","solana","SOLANA","accountInfo","bufferData","owner","PublicKey","handleConvertTransaction","handleSignAndSendTransaction","console","publicKey","toBase58","encodeURIComponent","convertToProgramWalletTransaction","serializeMessage","toTransaction","signAndSendTransaction","connection","extra","commitment","_rpcEndpoint","signatures","collectSignatures","raw","Message","Transaction","recentBlockhash","header","numRequiredSignatures","feePayer","accountKeys","signature","sigPubkeyPair","default","instructions","instruction","pubkey","isSigner","isWritable","isAccountWritable","TransactionInstruction","programId","programIdIndex","acc","cur","txHash","AptosProvider","_ref9","authKey","networkName","api","defaultServer","publicAccount","APTOS","minKeysRequired","network","isConnected","signTransaction","bloctoAptos","signAndSubmitTransaction","txOptions","hash","signMessage","formattedPayload","nonce","application","checkMessagePayloadFormat","public_keys","publicKeys","fetchAddress","BloctoSDK","_ref10","aptos","BloctoConnector","walletIds","blocto","_onAccountsChangedBind","onAccountsChanged","_onChainChangedBind","onChainChanged","_onDisconnectBind","onDisconnect","config","getProvider","setupListeners","emit","getChainId","unsupported","_handleConnectReset","_isUserRejectedRequestError","removeListeners","getAccount","_provider","_this$chains$","_this$chains$find","_BloctoSDK","_chainId","_rpc","find","getSigner","providers","isAuthorized","_this$_provider$_bloc","_this$_provider","switchChain","getValidPublicRPCUrl"],"sourceRoot":""}